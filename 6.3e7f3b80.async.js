(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"+00W":function(e,t,r){e.exports=r("RF0s").default,e.exports.default=e.exports},"+69w":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComposedStore=void 0;const n=r("calI");class i extends n.ObservableStore{constructor(e){super({}),this._children=e||{},Object.keys(this._children).forEach((e=>{const t=this._children[e];this._addChild(e,t)}))}_addChild(e,t){const r=t=>{const r=this.getState();r[e]=t,this.putState(r)};t.subscribe(r),r(t.getState())}}t.ComposedStore=i},"1jOq":function(e,t){function r(e,t){if(e&&t)return r(e)(t);if("function"!==typeof e)throw new TypeError("need wrapper function");return Object.keys(e).forEach((function(t){n[t]=e[t]})),n;function n(){for(var t=new Array(arguments.length),r=0;r<t.length;r++)t[r]=arguments[r];var n=e.apply(this,t),i=t[t.length-1];return"function"===typeof n&&n!==i&&Object.keys(i).forEach((function(e){n[e]=i[e]})),n}}e.exports=r},"2oH+":function(e,t,r){(function(e,r){var n=200,i="__lodash_hash_undefined__",o=800,s=16,a=9007199254740991,u="[object Arguments]",c="[object Array]",l="[object AsyncFunction]",h="[object Boolean]",d="[object Date]",f="[object Error]",p="[object Function]",m="[object GeneratorFunction]",g="[object Map]",y="[object Number]",v="[object Null]",b="[object Object]",w="[object Proxy]",_="[object RegExp]",M="[object Set]",S="[object String]",O="[object Undefined]",k="[object WeakMap]",E="[object ArrayBuffer]",x="[object DataView]",P="[object Float32Array]",j="[object Float64Array]",R="[object Int8Array]",A="[object Int16Array]",C="[object Int32Array]",T="[object Uint8Array]",I="[object Uint8ClampedArray]",L="[object Uint16Array]",D="[object Uint32Array]",N=/[\\^$.*+?()[\]{}|]/g,U=/^\[object .+?Constructor\]$/,B=/^(?:0|[1-9]\d*)$/,q={};q[P]=q[j]=q[R]=q[A]=q[C]=q[T]=q[I]=q[L]=q[D]=!0,q[u]=q[c]=q[E]=q[h]=q[x]=q[d]=q[f]=q[p]=q[g]=q[y]=q[b]=q[_]=q[M]=q[S]=q[k]=!1;var F="object"==typeof e&&e&&e.Object===Object&&e,W="object"==typeof self&&self&&self.Object===Object&&self,H=F||W||Function("return this")(),V=t&&!t.nodeType&&t,K=V&&"object"==typeof r&&r&&!r.nodeType&&r,z=K&&K.exports===V,J=z&&F.process,G=function(){try{var e=K&&K.require&&K.require("util").types;return e||J&&J.binding&&J.binding("util")}catch(t){}}(),X=G&&G.isTypedArray;function Y(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function Z(e,t){var r=-1,n=Array(e);while(++r<e)n[r]=t(r);return n}function $(e){return function(t){return e(t)}}function Q(e,t){return null==e?void 0:e[t]}function ee(e,t){return function(r){return e(t(r))}}var te=Array.prototype,re=Function.prototype,ne=Object.prototype,ie=H["__core-js_shared__"],oe=re.toString,se=ne.hasOwnProperty,ae=function(){var e=/[^.]+$/.exec(ie&&ie.keys&&ie.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ue=ne.toString,ce=oe.call(Object),le=RegExp("^"+oe.call(se).replace(N,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),he=z?H.Buffer:void 0,de=H.Symbol,fe=H.Uint8Array,pe=he?he.allocUnsafe:void 0,me=ee(Object.getPrototypeOf,Object),ge=Object.create,ye=ne.propertyIsEnumerable,ve=te.splice,be=de?de.toStringTag:void 0,we=function(){try{var e=wt(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),_e=he?he.isBuffer:void 0,Me=Math.max,Se=Date.now,Oe=wt(H,"Map"),ke=wt(Object,"create"),Ee=function(){function e(){}return function(t){if(!Ht(t))return{};if(ge)return ge(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function xe(e){var t=-1,r=null==e?0:e.length;this.clear();while(++t<r){var n=e[t];this.set(n[0],n[1])}}function Pe(){this.__data__=ke?ke(null):{},this.size=0}function je(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Re(e){var t=this.__data__;if(ke){var r=t[e];return r===i?void 0:r}return se.call(t,e)?t[e]:void 0}function Ae(e){var t=this.__data__;return ke?void 0!==t[e]:se.call(t,e)}function Ce(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=ke&&void 0===t?i:t,this}function Te(e){var t=-1,r=null==e?0:e.length;this.clear();while(++t<r){var n=e[t];this.set(n[0],n[1])}}function Ie(){this.__data__=[],this.size=0}function Le(e){var t=this.__data__,r=et(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():ve.call(t,r,1),--this.size,!0}function De(e){var t=this.__data__,r=et(t,e);return r<0?void 0:t[r][1]}function Ne(e){return et(this.__data__,e)>-1}function Ue(e,t){var r=this.__data__,n=et(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function Be(e){var t=-1,r=null==e?0:e.length;this.clear();while(++t<r){var n=e[t];this.set(n[0],n[1])}}function qe(){this.size=0,this.__data__={hash:new xe,map:new(Oe||Te),string:new xe}}function Fe(e){var t=bt(this,e)["delete"](e);return this.size-=t?1:0,t}function We(e){return bt(this,e).get(e)}function He(e){return bt(this,e).has(e)}function Ve(e,t){var r=bt(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function Ke(e){var t=this.__data__=new Te(e);this.size=t.size}function ze(){this.__data__=new Te,this.size=0}function Je(e){var t=this.__data__,r=t["delete"](e);return this.size=t.size,r}function Ge(e){return this.__data__.get(e)}function Xe(e){return this.__data__.has(e)}function Ye(e,t){var r=this.__data__;if(r instanceof Te){var i=r.__data__;if(!Oe||i.length<n-1)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new Be(i)}return r.set(e,t),this.size=r.size,this}function Ze(e,t){var r=Nt(e),n=!r&&Dt(e),i=!r&&!n&&qt(e),o=!r&&!n&&!i&&zt(e),s=r||n||i||o,a=s?Z(e.length,String):[],u=a.length;for(var c in e)!t&&!se.call(e,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||St(c,u))||a.push(c);return a}function $e(e,t,r){(void 0!==r&&!Lt(e[t],r)||void 0===r&&!(t in e))&&tt(e,t,r)}function Qe(e,t,r){var n=e[t];se.call(e,t)&&Lt(n,r)&&(void 0!==r||t in e)||tt(e,t,r)}function et(e,t){var r=e.length;while(r--)if(Lt(e[r][0],t))return r;return-1}function tt(e,t,r){"__proto__"==t&&we?we(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}xe.prototype.clear=Pe,xe.prototype["delete"]=je,xe.prototype.get=Re,xe.prototype.has=Ae,xe.prototype.set=Ce,Te.prototype.clear=Ie,Te.prototype["delete"]=Le,Te.prototype.get=De,Te.prototype.has=Ne,Te.prototype.set=Ue,Be.prototype.clear=qe,Be.prototype["delete"]=Fe,Be.prototype.get=We,Be.prototype.has=He,Be.prototype.set=Ve,Ke.prototype.clear=ze,Ke.prototype["delete"]=Je,Ke.prototype.get=Ge,Ke.prototype.has=Xe,Ke.prototype.set=Ye;var rt=vt();function nt(e){return null==e?void 0===e?O:v:be&&be in Object(e)?_t(e):jt(e)}function it(e){return Vt(e)&&nt(e)==u}function ot(e){if(!Ht(e)||Et(e))return!1;var t=Ft(e)?le:U;return t.test(It(e))}function st(e){return Vt(e)&&Wt(e.length)&&!!q[nt(e)]}function at(e){if(!Ht(e))return Pt(e);var t=xt(e),r=[];for(var n in e)("constructor"!=n||!t&&se.call(e,n))&&r.push(n);return r}function ut(e,t,r,n,i){e!==t&&rt(t,(function(o,s){if(i||(i=new Ke),Ht(o))ct(e,t,s,r,ut,n,i);else{var a=n?n(At(e,s),o,s+"",e,t,i):void 0;void 0===a&&(a=o),$e(e,s,a)}}),Gt)}function ct(e,t,r,n,i,o,s){var a=At(e,r),u=At(t,r),c=s.get(u);if(c)$e(e,r,c);else{var l=o?o(a,u,r+"",e,t,s):void 0,h=void 0===l;if(h){var d=Nt(u),f=!d&&qt(u),p=!d&&!f&&zt(u);l=u,d||f||p?Nt(a)?l=a:Bt(a)?l=mt(a):f?(h=!1,l=dt(u,!0)):p?(h=!1,l=pt(u,!0)):l=[]:Kt(u)||Dt(u)?(l=a,Dt(a)?l=Jt(a):Ht(a)&&!Ft(a)||(l=Mt(u))):h=!1}h&&(s.set(u,l),i(l,u,n,o,s),s["delete"](u)),$e(e,r,l)}}function lt(e,t){return Ct(Rt(e,t,Zt),e+"")}var ht=we?function(e,t){return we(e,"toString",{configurable:!0,enumerable:!1,value:Yt(t),writable:!0})}:Zt;function dt(e,t){if(t)return e.slice();var r=e.length,n=pe?pe(r):new e.constructor(r);return e.copy(n),n}function ft(e){var t=new e.constructor(e.byteLength);return new fe(t).set(new fe(e)),t}function pt(e,t){var r=t?ft(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function mt(e,t){var r=-1,n=e.length;t||(t=Array(n));while(++r<n)t[r]=e[r];return t}function gt(e,t,r,n){var i=!r;r||(r={});var o=-1,s=t.length;while(++o<s){var a=t[o],u=n?n(r[a],e[a],a,r,e):void 0;void 0===u&&(u=e[a]),i?tt(r,a,u):Qe(r,a,u)}return r}function yt(e){return lt((function(t,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,s=i>2?r[2]:void 0;o=e.length>3&&"function"==typeof o?(i--,o):void 0,s&&Ot(r[0],r[1],s)&&(o=i<3?void 0:o,i=1),t=Object(t);while(++n<i){var a=r[n];a&&e(t,a,n,o)}return t}))}function vt(e){return function(t,r,n){var i=-1,o=Object(t),s=n(t),a=s.length;while(a--){var u=s[e?a:++i];if(!1===r(o[u],u,o))break}return t}}function bt(e,t){var r=e.__data__;return kt(t)?r["string"==typeof t?"string":"hash"]:r.map}function wt(e,t){var r=Q(e,t);return ot(r)?r:void 0}function _t(e){var t=se.call(e,be),r=e[be];try{e[be]=void 0;var n=!0}catch(o){}var i=ue.call(e);return n&&(t?e[be]=r:delete e[be]),i}function Mt(e){return"function"!=typeof e.constructor||xt(e)?{}:Ee(me(e))}function St(e,t){var r=typeof e;return t=null==t?a:t,!!t&&("number"==r||"symbol"!=r&&B.test(e))&&e>-1&&e%1==0&&e<t}function Ot(e,t,r){if(!Ht(r))return!1;var n=typeof t;return!!("number"==n?Ut(r)&&St(t,r.length):"string"==n&&t in r)&&Lt(r[t],e)}function kt(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function Et(e){return!!ae&&ae in e}function xt(e){var t=e&&e.constructor,r="function"==typeof t&&t.prototype||ne;return e===r}function Pt(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}function jt(e){return ue.call(e)}function Rt(e,t,r){return t=Me(void 0===t?e.length-1:t,0),function(){var n=arguments,i=-1,o=Me(n.length-t,0),s=Array(o);while(++i<o)s[i]=n[t+i];i=-1;var a=Array(t+1);while(++i<t)a[i]=n[i];return a[t]=r(s),Y(e,this,a)}}function At(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Ct=Tt(ht);function Tt(e){var t=0,r=0;return function(){var n=Se(),i=s-(n-r);if(r=n,i>0){if(++t>=o)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function It(e){if(null!=e){try{return oe.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Lt(e,t){return e===t||e!==e&&t!==t}var Dt=it(function(){return arguments}())?it:function(e){return Vt(e)&&se.call(e,"callee")&&!ye.call(e,"callee")},Nt=Array.isArray;function Ut(e){return null!=e&&Wt(e.length)&&!Ft(e)}function Bt(e){return Vt(e)&&Ut(e)}var qt=_e||$t;function Ft(e){if(!Ht(e))return!1;var t=nt(e);return t==p||t==m||t==l||t==w}function Wt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function Ht(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Vt(e){return null!=e&&"object"==typeof e}function Kt(e){if(!Vt(e)||nt(e)!=b)return!1;var t=me(e);if(null===t)return!0;var r=se.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&oe.call(r)==ce}var zt=X?$(X):st;function Jt(e){return gt(e,Gt(e))}function Gt(e){return Ut(e)?Ze(e,!0):at(e)}var Xt=yt((function(e,t,r){ut(e,t,r)}));function Yt(e){return function(){return e}}function Zt(e){return e}function $t(){return!1}r.exports=Xt}).call(this,r("IyRk"),r("hOG+")(e))},"42mr":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EthereumProviderError=t.EthereumRpcError=void 0;const n=r("N1pS");class i extends Error{constructor(e,t,r){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!t||"string"!==typeof t)throw new Error('"message" must be a nonempty string.');super(t),this.code=e,void 0!==r&&(this.data=r)}serialize(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return n.default(this.serialize(),a,2)}}t.EthereumRpcError=i;class o extends i{constructor(e,t,r){if(!s(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,r)}}function s(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}function a(e,t){if("[Circular]"!==t)return t}t.EthereumProviderError=o},"4BfN":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorValues=t.errorCodes=void 0,t.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},t.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}}},"4uu8":function(e,t,r){"use strict";e.exports=i;var n=r("4vUj");function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}r("P7XM")(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},"4vUj":function(e,t,r){"use strict";e.exports=l;var n=r("xfhP").codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,s=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,u=r("CPG7");function c(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);u.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",h)}function h(){var e=this;"function"!==typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush((function(t,r){d(e,t,r)}))}function d(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}r("P7XM")(l,u),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,r){r(new i("_transform()"))},l.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))}},"6BdJ":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MergedStore=void 0;const n=r("calI");class i extends n.ObservableStore{constructor(e=[]){super({}),this._children=e,e.forEach((e=>this._addChild(e))),this._updateWholeState()}_addChild(e){e.subscribe((()=>this._updateWholeState()))}_updateWholeState(){const e=this._children.map((e=>e.getState())),t=Object.assign({},...e);this.putState(t)}}t.MergedStore=i},"7A9p":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.storeAsStream=void 0;const n=r("1IWx");class i extends n.Duplex{constructor(e){super({objectMode:!0}),this.resume(),this.handler=e=>this.push(e),this.obsStore=e,this.obsStore.subscribe(this.handler)}pipe(e,t){const r=super.pipe(e,t);return e.write(this.obsStore.getState()),r}_write(e,t,r){this.obsStore.putState(e),r()}_read(e){}_destroy(e,t){this.obsStore.unsubscribe(this.handler),super._destroy(e,t)}}function o(e){return new i(e)}t.storeAsStream=o},"7W2i":function(e,t,r){var n=r("SksO");function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports},"7ZKb":function(e,t,r){"use strict";var n;function i(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var o=r("xfhP").codes,s=o.ERR_MISSING_ARGS,a=o.ERR_STREAM_DESTROYED;function u(e){if(e)throw e}function c(e){return e.setHeader&&"function"===typeof e.abort}function l(e,t,o,s){s=i(s);var u=!1;e.on("close",(function(){u=!0})),void 0===n&&(n=r("UpG2")),n(e,{readable:t,writable:o},(function(e){if(e)return s(e);u=!0,s()}));var l=!1;return function(t){if(!u&&!l)return l=!0,c(e)?e.abort():"function"===typeof e.destroy?e.destroy():void s(t||new a("pipe"))}}function h(e){e()}function d(e,t){return e.pipe(t)}function f(e){return e.length?"function"!==typeof e[e.length-1]?u:e.pop():u}function p(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=f(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new s("streams");var o=t.map((function(e,r){var s=r<t.length-1,a=r>0;return l(e,s,a,(function(e){n||(n=e),e&&o.forEach(h),s||(o.forEach(h),i(n))}))}));return t.reduce(d)}e.exports=p},"8OQS":function(e,t){function r(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},"9FKY":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.storeTransformStream=void 0;const n=r("EdPt");function i(e){return n.obj(((t,r,n)=>{try{const r=e(t);return void n(null,r)}catch(i){return void n(i)}}))}t.storeTransformStream=i},Bnag:function(e,t){function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},CPG7:function(e,t,r){"use strict";(function(t){var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=c;var i=r("zcBp"),o=r("jYwt");r("P7XM")(c,i);for(var s=n(o.prototype),a=0;a<s.length;a++){var u=s[a];c.prototype[u]||(c.prototype[u]=o.prototype[u])}function c(e){if(!(this instanceof c))return new c(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||t.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this,r("Q2Ig"))},EbDI:function(e,t){function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},EdPt:function(e,t,r){(function(t){var n=r("43KI").Transform,i=r("MCLT").inherits,o=r("U6jy");function s(e){n.call(this,e),this._destroyed=!1}function a(e,t,r){r(null,e)}function u(e){return function(t,r,n){return"function"==typeof t&&(n=r,r=t,t={}),"function"!=typeof r&&(r=a),"function"!=typeof n&&(n=null),e(t,r,n)}}i(s,n),s.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var r=this;t.nextTick((function(){e&&r.emit("error",e),r.emit("close")}))}},e.exports=u((function(e,t,r){var n=new s(e);return n._transform=t,r&&(n._flush=r),n})),e.exports.ctor=u((function(e,t,r){function n(t){if(!(this instanceof n))return new n(t);this.options=o(e,t),s.call(this,this.options)}return i(n,s),n.prototype._transform=t,r&&(n.prototype._flush=r),n})),e.exports.obj=u((function(e,t,r){var n=new s(o({objectMode:!0,highWaterMark:16},e));return n._transform=t,r&&(n._flush=r),n}))}).call(this,r("Q2Ig"))},FGWJ:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return Q}));var n=r("lSNA"),i=r.n(n),o=r("cDf5"),s=r.n(o),a=r("yXPU"),u=r.n(a),c=r("lwsE"),l=r.n(c),h=r("W8MJ"),d=r.n(h),f=r("o0o1"),p=r.n(f),m=r("uIhD"),g=r("ZReu"),y=r("MXov"),v=r.n(y),b=r("MzeL"),w=r("rE/H"),_=r.n(w),M=r("W6Pm"),S=r("XH0y"),O=r.n(S),k=r("7W2i"),E=r.n(k),x=r("a1gu"),P=r.n(x),j=r("Nsbk"),R=r.n(j),A=r("oShl"),C=r.n(A),T=r("RIqP"),I=r.n(T),L=O.a.getLogger("torus.js");function D(e){var t=N();return function(){var r,n=R()(e);if(t){var i=R()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return P()(this,r)}}function N(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function U(e){return e.charAt(0).toUpperCase()+e.slice(1)}L.disableAll();var B=function(e){E()(r,e);var t=D(r);function r(e){var n,i=e.errors,o=e.responses,s=e.predicate;return l()(this,r),n=t.call(this,"Unable to resolve enough promises."),n.errors=i,n.responses=o,n.predicate=s,n}return d()(r)}(C()(Error)),q=function(e,t){return new Promise((function(r,n){var i,o=0,s={resolved:!1},a=new Array(e.length).fill(void 0),u=new Array(e.length).fill(void 0);e.forEach((function(c,l){c.then((function(e){u[l]=e})).catch((function(e){a[l]=e})).finally((function(){s.resolved||t(u.slice(0),s).then((function(e){s.resolved=!0,r(e)})).catch((function(e){i=e})).finally((function(t){if(o+=1,o===e.length){var r=Object.values(u.reduce((function(e,t){var r,n=t||{},i=n.id,o=n.error;return(null===o||void 0===o||null===(r=o.data)||void 0===r?void 0:r.length)>0&&(o.data.startsWith("Error occurred while verifying params")?e[i]=U(o.data):e[i]=o.data),e}),{}));if(r.length>0){var s=r.length>1?"\n".concat(r.map((function(e){return"\u2022 ".concat(e)})).join("\n")):r[0];n(new Error(s))}else{var c;n(new B({errors:a,responses:u,predicate:(null===(c=i)||void 0===c?void 0:c.message)||i}))}}}))}))}))}))};function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function H(e){var t=V();return function(){var r,n=R()(e);if(t){var i=R()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return P()(this,r)}}function V(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var K=function(e){E()(r,e);var t=H(r);function r(){return l()(this,r),t.apply(this,arguments)}return d()(r)}(C()(Error)),z=function e(t,r){var n=t;if("number"===typeof n&&(n=Array.from({length:n},(function(e,t){return t}))),r>n.length||r<=0)return[];if(r===n.length)return[n];if(1===r)return n.reduce((function(e,t){return[].concat(I()(e),[[t]])}),[]);for(var i=[],o=[],s=0;s<=n.length-r+1;s+=1){o=e(n.slice(s+1),r-1);for(var a=0;a<o.length;a+=1)i.push([n[s]].concat(I()(o[a])))}return i},J=function(e,t){for(var r={},n=0;n<e.length;n+=1){var i=_()(e[n]);if(r[i]=r[i]?r[i]+1:1,r[i]===t)return e[n]}},G=function(){var e=u()(p.a.mark((function e(t,r,n){var i;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.map((function(e){return Object(g["c"])(e,Object(g["a"])("VerifierLookupRequest",{verifier:r,verifier_id:n.toString()})).catch((function(e){return L.error("lookup request failed",e)}))})),e.abrupt("return",q(i,(function(e){var r=e.filter((function(e){return e})),n=J(r.map((function(e){return e&&e.error})),1+~~(t.length/2)),i=J(r.map((function(e){return e&&e.result})),1+~~(t.length/2));return i||n?Promise.resolve({keyResult:i,errorResult:n}):Promise.reject(new Error("invalid results ".concat(JSON.stringify(e))))})));case 2:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),X=function(e,t,r,n){return new Promise((function(i,o){setTimeout((function(){G(e,t,r).then(i).catch(o)}),n)}))},Y=function(){var e=u()(p.a.mark((function e(t,r,n,i,o,s){var a,u,c,l,h;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0===n?(a=Math.floor(Math.random()*t.length),u=a):a=n%t.length,a!==i){e.next=3;break}throw new Error("Looped through all");case 3:return void 0!==i&&(u=i),c=Object(g["a"])("KeyAssign",{verifier:o,verifier_id:s.toString()}),e.prev=5,e.next=8,Object(g["c"])("https://signer.tor.us/api/sign",c,{headers:{pubKeyX:r[a].X,pubKeyY:r[a].Y}},{useAPIKey:!0});case 8:return l=e.sent,e.abrupt("return",Object(g["c"])(t[a],W(W({},c),l),{headers:{"Content-Type":"application/json; charset=utf-8"}}));case 12:if(e.prev=12,e.t0=e["catch"](5),L.error(e.t0),h=["Timed out","TypeError: Failed to fetch","TypeError: cancelled","TypeError: NetworkError when attempting to fetch resource."],!h.includes(e.t0.message)){e.next=18;break}return e.abrupt("return",Y(t,r,a+1,u,o,s));case 18:throw new Error("Sorry, the Torus Network that powers Web3Auth is currently very busy.\n    We will generate your key in time. Pls try again later. \n\n    ".concat(e.t0.message||""));case 19:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,r,n,i,o,s){return e.apply(this,arguments)}}();function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Q=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.enableOneKey,n=void 0!==r&&r,i=e.metadataHost,o=void 0===i?"https://metadata.tor.us":i,s=e.allowHost,a=void 0===s?"https://signer.tor.us/api/allow":s,u=e.serverTimeOffset,c=void 0===u?0:u;l()(this,t),this.ec=new b["ec"]("secp256k1"),this.metadataHost=o,this.allowHost=a,this.enableOneKey=n,this.serverTimeOffset=c||0}return d()(t,[{key:"getUserTypeAndAddress",value:function(){var e=u()(p.a.mark((function e(t,r,n){var i,o,s,a,u,c,l,h,d,f,m,g,y,b,w,_,M,S,O,k,E,x=arguments;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=n.verifier,o=n.verifierId,s=x.length>3&&void 0!==x[3]&&x[3],e.next=4,G(t,i,o);case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:if(a=e.t0,u=a.keyResult,c=a.errorResult,l=!1,!c||!JSON.stringify(c).includes("Verifier + VerifierID has not yet been assigned")){e.next=26;break}if(s){e.next=14;break}throw new Error("Verifier + VerifierID has not yet been assigned");case 14:return e.next=16,Y(t,r,void 0,void 0,i,o);case 16:return e.next=18,X(t,i,o,1e3);case 18:if(e.t1=e.sent,e.t1){e.next=21;break}e.t1={};case 21:d=e.t1,h=d.keyResult,l=!0,e.next=31;break;case 26:if(!u){e.next=30;break}h=u,e.next=31;break;case 30:throw new Error("node results do not match at first lookup ".concat(JSON.stringify(u||{}),", ").concat(JSON.stringify(c||{})));case 31:if(!h){e.next=61;break}return f=h.keys[0],m=f.pub_key_X,g=f.pub_key_Y,e.prev=33,e.next=37,this.getOrSetNonce(m,g,void 0,!l);case 37:S=e.sent,y=S.typeOfUser,b=S.nonce,w=S.pubNonce,M=S.upgraded,b=new v.a(b||"0",16),e.next=48;break;case 45:throw e.prev=45,e.t2=e["catch"](33),new K;case 48:if("v1"!==y){e.next=52;break}_=this.ec.keyFromPublic({x:m.toString(16),y:g.toString(16)}).getPublic().add(this.ec.keyFromPrivate(b.toString(16)).getPublic()),e.next=57;break;case 52:if("v2"!==y){e.next=56;break}_=this.ec.keyFromPublic({x:m.toString(16),y:g.toString(16)}).getPublic().add(this.ec.keyFromPublic({x:w.x,y:w.y}).getPublic()),e.next=57;break;case 56:throw new Error("getOrSetNonce should always return typeOfUser.");case 57:return O=_.getX().toString(16),k=_.getY().toString(16),E=this.generateAddressFromPubKey(_.getX(),_.getY()),e.abrupt("return",{typeOfUser:y,nonce:b,pubNonce:w,upgraded:M,X:O,Y:k,address:E});case 61:throw new Error("node results do not match at final lookup ".concat(JSON.stringify(u||{}),", ").concat(JSON.stringify(c||{})));case 62:case"end":return e.stop()}}),e,this,[[33,45]])})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"setCustomKey",value:function(){var e=u()(p.a.mark((function e(t){var r,n,i,o,s,a,u,c,l;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.privKeyHex,n=t.metadataNonce,i=t.torusKeyHex,o=t.customKeyHex,i?s=new v.a(i,16):(a=new v.a(r,16),s=a.sub(n).umod(this.ec.curve.n)),u=new v.a(o,16),c=u.sub(s).umod(this.ec.curve.n),l=this.generateMetadataParams(c.toString(16),s.toString(16)),e.next=7,this.setMetadata(l);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"retrieveShares",value:function(){var t=u()(p.a.mark((function t(r,n,i,o,a){var c,l,h,d,f,y,b,w,_,S=this,O=arguments;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return c=O.length>5&&void 0!==O[5]?O[5]:{},l=[],t.next=4,Object(g["b"])(this.allowHost,{headers:{verifier:i,verifier_id:o.verifier_id}},{useAPIKey:!0});case 4:for(h=Object(m["generatePrivate"])(),d=Object(m["getPublic"])(h).toString("hex"),f=d.slice(2,66),y=d.slice(66),b=Object(M["keccak256"])(a),w=0;w<r.length;w+=1)_=Object(g["c"])(r[w],Object(g["a"])("CommitmentRequest",{messageprefix:"mug00",tokencommitment:b.slice(2),temppubx:f,temppuby:y,verifieridentifier:i})).catch((function(e){return L.error("commitment",e)})),l.push(_);return t.abrupt("return",q(l,(function(e){var t=e.filter((function(e){return!(!e||"object"!==s()(e))&&!e.error}));return t.length>=3*~~(r.length/4)+1?Promise.resolve(e):Promise.reject(new Error("invalid ".concat(JSON.stringify(e))))})).then((function(t){for(var s=[],l=[],d=0;d<t.length;d+=1)t[d]&&l.push(t[d].result);for(var f=0;f<r.length;f+=1){var y=Object(g["c"])(r[f],Object(g["a"])("ShareRequest",{encrypted:"yes",item:[$($({},o),{},{idtoken:a,nodesignatures:l,verifieridentifier:i},c)]})).catch((function(e){return L.error("share req",e)}));s.push(y)}return q(s,function(){var t=u()(p.a.mark((function t(i,o){var s,a,u,c,l,d,f,g,y,b,w,_,M;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=i.filter((function(e){return e})),a=J(i.map((function(e){return e&&e.result&&e.result.keys[0].PublicKey})),1+~~(r.length/2)),!(s.length>=1+~~(r.length/2)&&a)){t.next=25;break}for(u=[],c=[],l=0;l<i.length;l+=1)i[l]&&i[l].result&&i[l].result.keys&&i[l].result.keys.length>0?(i[l].result.keys.sort((function(e,t){return new v.a(e.Index,16).cmp(new v.a(t.Index,16))})),i[l].result.keys[0].Metadata?(d={ephemPublicKey:e.from(i[l].result.keys[0].Metadata.ephemPublicKey,"hex"),iv:e.from(i[l].result.keys[0].Metadata.iv,"hex"),mac:e.from(i[l].result.keys[0].Metadata.mac,"hex"),mode:e.from(i[l].result.keys[0].Metadata.mode,"hex")},u.push(Object(m["decrypt"])(h,$($({},d),{},{ciphertext:e.from(atob(i[l].result.keys[0].Share).padStart(64,"0"),"hex")})).catch((function(e){return L.debug("share decryption",e)})))):u.push(Promise.resolve(e.from(i[l].result.keys[0].Share.padStart(64,"0"),"hex")))):u.push(Promise.resolve(void 0)),c.push(new v.a(n[l],16));return t.next=8,Promise.all(u);case 8:if(f=t.sent,!o.resolved){t.next=11;break}return t.abrupt("return",void 0);case 11:g=f.reduce((function(e,t,r){return t&&e.push({index:c[r],value:new v.a(t)}),e}),[]),y=z(g.length,1+~~(r.length/2)),w=function(t){var r=y[t],n=g.filter((function(e,t){return r.includes(t)})),i=n.map((function(e){return e.value})),o=n.map((function(e){return e.index})),s=S.lagrangeInterpolation(i,o),u=Object(m["getPublic"])(e.from(s.toString(16,64),"hex")).toString("hex"),c=u.slice(2,66),l=u.slice(66);if(0===new v.a(c,16).cmp(new v.a(a.X,16))&&0===new v.a(l,16).cmp(new v.a(a.Y,16)))return b=s,"break"},_=0;case 15:if(!(_<y.length)){t.next=22;break}if(M=w(_),"break"!==M){t.next=19;break}return t.abrupt("break",22);case 19:_+=1,t.next=15;break;case 22:if(void 0!==b){t.next=24;break}throw new Error("could not derive private key");case 24:return t.abrupt("return",b);case 25:throw new Error("invalid");case 26:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}())})).then(function(){var t=u()(p.a.mark((function t(r){var n,i,o,s,a,u,c,l;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=r,i=Object(m["getPublic"])(e.from(n.toString(16,64),"hex")).toString("hex"),o=i.slice(2,66),s=i.slice(66),!S.enableOneKey){t.next=12;break}return t.next=7,S.getNonce(o,s,n);case 7:u=t.sent,c=u.nonce,a=new v.a(c||"0",16),t.next=15;break;case 12:return t.next=14,S.getMetadata({pub_key_X:o,pub_key_Y:s});case 14:a=t.sent;case 15:return L.debug("> torus.js/retrieveShares",{privKey:n.toString(16),metadataNonce:a.toString(16)}),n=n.add(a).umod(S.ec.curve.n),l=S.generateAddressFromPrivKey(n),L.debug("> torus.js/retrieveShares",{ethAddress:l,privKey:n.toString(16)}),t.abrupt("return",{ethAddress:l,privKey:n.toString("hex",64),metadataNonce:a});case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 11:case"end":return t.stop()}}),t,this)})));function r(e,r,n,i,o){return t.apply(this,arguments)}return r}()},{key:"getMetadata",value:function(){var e=u()(p.a.mark((function e(t,r){var n;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(g["c"])("".concat(this.metadataHost,"/get"),t,r,{useAPIKey:!0});case 3:if(n=e.sent,n&&n.message){e.next=6;break}return e.abrupt("return",new v.a(0));case 6:return e.abrupt("return",new v.a(n.message,16));case 9:return e.prev=9,e.t0=e["catch"](0),L.error("get metadata error",e.t0),e.abrupt("return",new v.a(0));case 13:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"generateMetadataParams",value:function(t,r){var n=this.ec.keyFromPrivate(r.toString("hex",64)),i={data:t,timestamp:new v.a(~~(this.serverTimeOffset+Date.now()/1e3)).toString(16)},o=n.sign(Object(M["keccak256"])(_()(i)).slice(2));return{pub_key_X:n.getPublic().getX().toString("hex"),pub_key_Y:n.getPublic().getY().toString("hex"),set_data:i,signature:e.from(o.r.toString(16,64)+o.s.toString(16,64)+new v.a(o.v).toString(16,2),"hex").toString("base64")}}},{key:"setMetadata",value:function(){var e=u()(p.a.mark((function e(t,r){var n;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(g["c"])("".concat(this.metadataHost,"/set"),t,r,{useAPIKey:!0});case 3:return n=e.sent,e.abrupt("return",n.message);case 7:return e.prev=7,e.t0=e["catch"](0),L.error("set metadata error",e.t0),e.abrupt("return","");case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"lagrangeInterpolation",value:function(e,t){if(e.length!==t.length)return null;for(var r=new v.a(0),n=0;n<e.length;n+=1){for(var i=new v.a(1),o=new v.a(1),s=0;s<e.length;s+=1)if(n!==s){i=i.mul(t[s].neg()),i=i.umod(this.ec.curve.n);var a=t[n].sub(t[s]);a=a.umod(this.ec.curve.n),o=o.mul(a).umod(this.ec.curve.n)}var u=i.mul(o.invm(this.ec.curve.n)).umod(this.ec.curve.n);u=u.mul(e[n]).umod(this.ec.curve.n),r=r.add(u)}return r.umod(this.ec.curve.n)}},{key:"generateAddressFromPrivKey",value:function(t){var r=this.ec.keyFromPrivate(t.toString("hex",64),"hex"),n=r.getPublic().encode("hex").slice(2),i="0x".concat(Object(M["keccak256"])(e.from(n,"hex")).slice(26));return Object(M["toChecksumAddress"])(i)}},{key:"generateAddressFromPubKey",value:function(t,r){var n=this.ec.keyFromPublic({x:t.toString("hex",64),y:r.toString("hex",64)}),i=n.getPublic().encode("hex").slice(2),o="0x".concat(Object(M["keccak256"])(e.from(i,"hex")).slice(26));return Object(M["toChecksumAddress"])(o)}},{key:"getPublicAddress",value:function(){var e=u()(p.a.mark((function e(t,r,n){var i,o,s,a,u,c,l,h,d,f,m,g,y,b,w,_,M,S,O,k,E=arguments;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=n.verifier,o=n.verifierId,s=E.length>3&&void 0!==E[3]&&E[3],L.debug("> torus.js/getPublicAddress",{endpoints:t,torusNodePubs:r,verifier:i,verifierId:o,isExtended:s}),u=!1,e.next=6,G(t,i,o);case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0={};case 9:if(c=e.t0,l=c.keyResult,h=c.errorResult,!h||!JSON.stringify(h).includes("Verifier not supported")){e.next=16;break}throw new Error("Verifier not supported. Check if you: \n\n      1. Are on the right network (Torus testnet/mainnet) \n\n      2. Have setup a verifier on dashboard.web3auth.io?");case 16:if(!h||!JSON.stringify(h).includes("Verifier + VerifierID has not yet been assigned")){e.next=29;break}return e.next=19,Y(t,r,void 0,void 0,i,o);case 19:return e.next=21,X(t,i,o,1e3);case 21:if(e.t1=e.sent,e.t1){e.next=24;break}e.t1={};case 24:d=e.t1,a=d.keyResult,u=!0,e.next=34;break;case 29:if(!l){e.next=33;break}a=l,e.next=34;break;case 33:throw new Error("node results do not match at first lookup ".concat(JSON.stringify(l||{}),", ").concat(JSON.stringify(h||{})));case 34:if(L.debug("> torus.js/getPublicAddress",{finalKeyResult:a,isNewKey:u}),!a){e.next=76;break}if(m=a.keys[0],g=m.pub_key_X,y=m.pub_key_Y,!this.enableOneKey){e.next=64;break}return e.prev=38,e.next=42,this.getOrSetNonce(g,y,void 0,!u);case 42:O=e.sent,b=O.typeOfUser,w=O.nonce,_=O.pubNonce,S=O.upgraded,w=new v.a(w||"0",16),e.next=53;break;case 50:throw e.prev=50,e.t2=e["catch"](38),new K;case 53:if("v1"!==b){e.next=57;break}M=this.ec.keyFromPublic({x:g.toString(16),y:y.toString(16)}).getPublic().add(this.ec.keyFromPrivate(w.toString(16)).getPublic()),e.next=62;break;case 57:if("v2"!==b){e.next=61;break}M=S?this.ec.keyFromPublic({x:g.toString(16),y:y.toString(16)}).getPublic():this.ec.keyFromPublic({x:g.toString(16),y:y.toString(16)}).getPublic().add(this.ec.keyFromPublic({x:_.x,y:_.y}).getPublic()),e.next=62;break;case 61:throw new Error("getOrSetNonce should always return typeOfUser.");case 62:e.next=69;break;case 64:return b="v1",e.next=67,this.getMetadata({pub_key_X:g,pub_key_Y:y});case 67:w=e.sent,M=this.ec.keyFromPublic({x:g.toString(16),y:y.toString(16)}).getPublic().add(this.ec.keyFromPrivate(w.toString(16)).getPublic());case 69:if(g=M.getX().toString(16),y=M.getY().toString(16),k=this.generateAddressFromPubKey(M.getX(),M.getY()),L.debug("> torus.js/getPublicAddress",{X:g,Y:y,address:k,typeOfUser:b,nonce:null===(f=w)||void 0===f?void 0:f.toString(16),pubNonce:_}),s){e.next=75;break}return e.abrupt("return",k);case 75:return e.abrupt("return",{typeOfUser:b,address:k,X:g,Y:y,metadataNonce:w,pubNonce:_});case 76:throw new Error("node results do not match at final lookup ".concat(JSON.stringify(l||{}),", ").concat(JSON.stringify(h||{})));case 77:case"end":return e.stop()}}),e,this,[[38,50]])})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"getOrSetNonce",value:function(){var e=u()(p.a.mark((function e(t,r,n){var i,o,s,a=arguments;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=a.length>3&&void 0!==a[3]&&a[3],s=i?"getNonce":"getOrSetNonce",o=n?this.generateMetadataParams(s,n):{pub_key_X:t,pub_key_Y:r,set_data:{data:s}},e.abrupt("return",Object(g["c"])("".concat(this.metadataHost,"/get_or_set_nonce"),o,void 0,{useAPIKey:!0}));case 4:case"end":return e.stop()}}),e,this)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"getNonce",value:function(){var e=u()(p.a.mark((function e(t,r,n){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getOrSetNonce(t,r,n,!0));case 1:case"end":return e.stop()}}),e,this)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"getPostboxKeyFrom1OutOf1",value:function(e,t){var r=new v.a(e,16),n=new v.a(t,16);return r.sub(n).umod(this.ec.curve.n).toString("hex")}}],[{key:"enableLogging",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e?L.enableAll():L.disableAll()}},{key:"setAPIKey",value:function(e){Object(g["d"])(e)}},{key:"setEmbedHost",value:function(e){Object(g["e"])(e)}},{key:"isGetOrSetNonceError",value:function(e){return e instanceof K}}]),t}()}).call(this,r("HDXh").Buffer)},Fj00:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("+qE3");function i(e,t,r){try{Reflect.apply(e,t,r)}catch(n){setTimeout((()=>{throw n}))}}function o(e){const t=e.length,r=new Array(t);for(let n=0;n<t;n+=1)r[n]=e[n];return r}class s extends n.EventEmitter{emit(e,...t){let r="error"===e;const n=this._events;if(void 0!==n)r=r&&void 0===n.error;else if(!r)return!1;if(r){let e;if(t.length>0&&([e]=t),e instanceof Error)throw e;const r=new Error("Unhandled error."+(e?` (${e.message})`:""));throw r.context=e,r}const s=n[e];if(void 0===s)return!1;if("function"===typeof s)i(s,this,t);else{const e=s.length,r=o(s);for(let n=0;n<e;n+=1)i(r[n],this,t)}return!0}}t.default=s},"H1X/":function(e,t,r){"use strict";(function(t){var n;function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=r("UpG2"),s=Symbol("lastResolve"),a=Symbol("lastReject"),u=Symbol("error"),c=Symbol("ended"),l=Symbol("lastPromise"),h=Symbol("handlePromise"),d=Symbol("stream");function f(e,t){return{value:e,done:t}}function p(e){var t=e[s];if(null!==t){var r=e[d].read();null!==r&&(e[l]=null,e[s]=null,e[a]=null,t(f(r,!1)))}}function m(e){t.nextTick(p,e)}function g(e,t){return function(r,n){e.then((function(){t[c]?r(f(void 0,!0)):t[h](r,n)}),n)}}var y=Object.getPrototypeOf((function(){})),v=Object.setPrototypeOf((n={get stream(){return this[d]},next:function(){var e=this,r=this[u];if(null!==r)return Promise.reject(r);if(this[c])return Promise.resolve(f(void 0,!0));if(this[d].destroyed)return new Promise((function(r,n){t.nextTick((function(){e[u]?n(e[u]):r(f(void 0,!0))}))}));var n,i=this[l];if(i)n=new Promise(g(i,this));else{var o=this[d].read();if(null!==o)return Promise.resolve(f(o,!1));n=new Promise(this[h])}return this[l]=n,n}},i(n,Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var e=this;return new Promise((function(t,r){e[d].destroy(null,(function(e){e?r(e):t(f(void 0,!0))}))}))})),n),y),b=function(e){var t,r=Object.create(v,(t={},i(t,d,{value:e,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,u,{value:null,writable:!0}),i(t,c,{value:e._readableState.endEmitted,writable:!0}),i(t,h,{value:function(e,t){var n=r[d].read();n?(r[l]=null,r[s]=null,r[a]=null,e(f(n,!1))):(r[s]=e,r[a]=t)},writable:!0}),t));return r[l]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[a];return null!==t&&(r[l]=null,r[s]=null,r[a]=null,t(e)),void(r[u]=e)}var n=r[s];null!==n&&(r[l]=null,r[s]=null,r[a]=null,n(f(void 0,!0))),r[c]=!0})),e.on("readable",m.bind(null,r)),r};e.exports=b}).call(this,r("Q2Ig"))},Ijbi:function(e,t,r){var n=r("WkPL");function i(e){if(Array.isArray(e))return n(e)}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports},K0MK:function(e,t,r){"use strict";var n=r("xfhP").codes.ERR_INVALID_OPT_VALUE;function i(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}function o(e,t,r,o){var s=i(t,o,r);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0){var a=o?r:"highWaterMark";throw new n(a,s)}return Math.floor(s)}return e.objectMode?16:16384}e.exports={getHighWaterMark:o}},KWYN:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeError=t.isValidCode=t.getMessageFromCode=t.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const n=r("4BfN"),i=r("42mr"),o=n.errorCodes.rpc.internal,s="Unspecified error message. This is a bug, please report it.",a={code:o,message:u(o)};function u(e,r=s){if(Number.isInteger(e)){const r=e.toString();if(f(n.errorValues,r))return n.errorValues[r].message;if(h(e))return t.JSON_RPC_SERVER_ERROR_MESSAGE}return r}function c(e){if(!Number.isInteger(e))return!1;const t=e.toString();return!!n.errorValues[t]||!!h(e)}function l(e,{fallbackError:t=a,shouldIncludeStack:r=!1}={}){var n,o;if(!t||!Number.isInteger(t.code)||"string"!==typeof t.message)throw new Error("Must provide fallback error with integer number code and string message.");if(e instanceof i.EthereumRpcError)return e.serialize();const s={};if(e&&"object"===typeof e&&!Array.isArray(e)&&f(e,"code")&&c(e.code)){const t=e;s.code=t.code,t.message&&"string"===typeof t.message?(s.message=t.message,f(t,"data")&&(s.data=t.data)):(s.message=u(s.code),s.data={originalError:d(e)})}else{s.code=t.code;const r=null===(n=e)||void 0===n?void 0:n.message;s.message=r&&"string"===typeof r?r:t.message,s.data={originalError:d(e)}}const l=null===(o=e)||void 0===o?void 0:o.stack;return r&&e&&l&&"string"===typeof l&&(s.stack=l),s}function h(e){return e>=-32099&&e<=-32e3}function d(e){return e&&"object"===typeof e&&!Array.isArray(e)?Object.assign({},e):e}function f(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",t.getMessageFromCode=u,t.isValidCode=c,t.serializeError=l},MXov:function(e,t,r){(function(e){(function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function o(e,t,r){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var s;"object"===typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(24).Buffer}catch(R){}function a(e,t){var r=e.charCodeAt(t);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+e)}function u(e,t,r){var n=a(e,r);return r-1>=t&&(n|=a(e,r-1)<<4),n}function c(e,t,r,i){for(var o=0,s=0,a=Math.min(e.length,r),u=t;u<a;u++){var c=e.charCodeAt(u)-48;o*=i,s=c>=49?c-49+10:c>=17?c-17+10:c,n(c>=0&&s<i,"Invalid character"),o+=s}return o}function l(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(o.isBN=function(e){return e instanceof o||null!==e&&"object"===typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,r){if("number"===typeof e)return this._initNumber(e,t,r);if("object"===typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36),e=e.toString().replace(/\s+/g,"");var i=0;"-"===e[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,r):(this._parseBase(e,t,i),"le"===r&&this._initArray(this.toArray(),t,r)))},o.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},o.prototype._initArray=function(e,t,r){if(n("number"===typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===r)for(i=e.length-1,o=0;i>=0;i-=3)s=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,a+=24,a>=26&&(a-=26,o++);else if("le"===r)for(i=0,o=0;i<e.length;i+=3)s=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,a+=24,a>=26&&(a-=26,o++);return this._strip()},o.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=u(e,t,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else{var a=e.length-t;for(n=a%2===0?t+1:t;n<e.length;n+=2)i=u(e,t,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8}this._strip()},o.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var o=e.length-r,s=o%n,a=Math.min(o,o-s)+r,u=0,l=r;l<a;l+=n)u=c(e,l,l+n,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var h=1;for(u=c(e,l,e.length,t),l=0;l<s;l++)h*=t;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype._move=function(e){l(e,this)},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){while(this.length<e)this.words[this.length++]=0;return this},o.prototype._strip=function(){while(this.length>1&&0===this.words[this.length-1])this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!==typeof Symbol&&"function"===typeof Symbol.for)try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(R){o.prototype.inspect=h}else o.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(e,t){var r;if(e=e||10,t=0|t||1,16===e||"hex"===e){r="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<i|o)).toString(16);o=a>>>24-i&16777215,r=0!==o||s!==this.length-1?d[6-u.length]+u+r:u+r,i+=2,i>=26&&(i-=26,s--)}0!==o&&(r=o.toString(16)+r);while(r.length%t!==0)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var c=f[e],l=p[e];r="";var h=this.clone();h.negative=0;while(!h.isZero()){var m=h.modrn(l).toString(e);h=h.idivn(l),r=h.isZero()?m+r:d[c-m.length]+m+r}this.isZero()&&(r="0"+r);while(r.length%t!==0)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16,2)},s&&(o.prototype.toBuffer=function(e,t){return this.toArrayLike(s,e,t)}),o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};var m=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)};function g(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=e.words[n]>>>i&1}return t}function y(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],o=0|t.words[0],s=i*o,a=67108863&s,u=s/67108864|0;r.words[0]=a;for(var c=1;c<n;c++){for(var l=u>>>26,h=67108863&u,d=Math.min(c,t.length-1),f=Math.max(0,c-e.length+1);f<=d;f++){var p=c-f|0;i=0|e.words[p],o=0|t.words[f],s=i*o+h,l+=s/67108864|0,h=67108863&s}r.words[c]=0|h,u=0|l}return 0!==u?r.words[c]=0|u:r.length--,r._strip()}o.prototype.toArrayLike=function(e,t,r){this._strip();var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0");var s=m(e,o),a="le"===t?"LE":"BE";return this["_toArrayLike"+a](s,i),s},o.prototype._toArrayLikeLE=function(e,t){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;e[r++]=255&s,r<e.length&&(e[r++]=s>>8&255),r<e.length&&(e[r++]=s>>16&255),6===o?(r<e.length&&(e[r++]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r<e.length){e[r++]=n;while(r<e.length)e[r++]=0}},o.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;e[r--]=255&s,r>=0&&(e[r--]=s>>8&255),r>=0&&(e[r--]=s>>16&255),6===o?(r>=0&&(e[r--]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r>=0){e[r--]=n;while(r>=0)e[r--]=0}},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0===(8191&t)&&(r+=13,t>>>=13),0===(127&t)&&(r+=7,t>>>=7),0===(15&t)&&(r+=4,t>>>=4),0===(3&t)&&(r+=2,t>>>=2),0===(1&t)&&r++,r},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){while(this.length<e.length)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},o.prototype.ior=function(e){return n(0===(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},o.prototype.iand=function(e){return n(0===(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},o.prototype.ixor=function(e){return n(0===(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){n("number"===typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){n("number"===typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this._strip()},o.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,o=0;o<n.length;o++)t=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<r.length;o++)t=(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var o=0,s=0;s<n.length;s++)t=(0|r.words[s])-(0|n.words[s])+o,o=t>>26,this.words[s]=67108863&t;for(;0!==o&&s<r.length;s++)t=(0|r.words[s])+o,o=t>>26,this.words[s]=67108863&t;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var v=function(e,t,r){var n,i,o,s=e.words,a=t.words,u=r.words,c=0,l=0|s[0],h=8191&l,d=l>>>13,f=0|s[1],p=8191&f,m=f>>>13,g=0|s[2],y=8191&g,v=g>>>13,b=0|s[3],w=8191&b,_=b>>>13,M=0|s[4],S=8191&M,O=M>>>13,k=0|s[5],E=8191&k,x=k>>>13,P=0|s[6],j=8191&P,R=P>>>13,A=0|s[7],C=8191&A,T=A>>>13,I=0|s[8],L=8191&I,D=I>>>13,N=0|s[9],U=8191&N,B=N>>>13,q=0|a[0],F=8191&q,W=q>>>13,H=0|a[1],V=8191&H,K=H>>>13,z=0|a[2],J=8191&z,G=z>>>13,X=0|a[3],Y=8191&X,Z=X>>>13,$=0|a[4],Q=8191&$,ee=$>>>13,te=0|a[5],re=8191&te,ne=te>>>13,ie=0|a[6],oe=8191&ie,se=ie>>>13,ae=0|a[7],ue=8191&ae,ce=ae>>>13,le=0|a[8],he=8191&le,de=le>>>13,fe=0|a[9],pe=8191&fe,me=fe>>>13;r.negative=e.negative^t.negative,r.length=19,n=Math.imul(h,F),i=Math.imul(h,W),i=i+Math.imul(d,F)|0,o=Math.imul(d,W);var ge=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(p,F),i=Math.imul(p,W),i=i+Math.imul(m,F)|0,o=Math.imul(m,W),n=n+Math.imul(h,V)|0,i=i+Math.imul(h,K)|0,i=i+Math.imul(d,V)|0,o=o+Math.imul(d,K)|0;var ye=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(y,F),i=Math.imul(y,W),i=i+Math.imul(v,F)|0,o=Math.imul(v,W),n=n+Math.imul(p,V)|0,i=i+Math.imul(p,K)|0,i=i+Math.imul(m,V)|0,o=o+Math.imul(m,K)|0,n=n+Math.imul(h,J)|0,i=i+Math.imul(h,G)|0,i=i+Math.imul(d,J)|0,o=o+Math.imul(d,G)|0;var ve=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(w,F),i=Math.imul(w,W),i=i+Math.imul(_,F)|0,o=Math.imul(_,W),n=n+Math.imul(y,V)|0,i=i+Math.imul(y,K)|0,i=i+Math.imul(v,V)|0,o=o+Math.imul(v,K)|0,n=n+Math.imul(p,J)|0,i=i+Math.imul(p,G)|0,i=i+Math.imul(m,J)|0,o=o+Math.imul(m,G)|0,n=n+Math.imul(h,Y)|0,i=i+Math.imul(h,Z)|0,i=i+Math.imul(d,Y)|0,o=o+Math.imul(d,Z)|0;var be=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(S,F),i=Math.imul(S,W),i=i+Math.imul(O,F)|0,o=Math.imul(O,W),n=n+Math.imul(w,V)|0,i=i+Math.imul(w,K)|0,i=i+Math.imul(_,V)|0,o=o+Math.imul(_,K)|0,n=n+Math.imul(y,J)|0,i=i+Math.imul(y,G)|0,i=i+Math.imul(v,J)|0,o=o+Math.imul(v,G)|0,n=n+Math.imul(p,Y)|0,i=i+Math.imul(p,Z)|0,i=i+Math.imul(m,Y)|0,o=o+Math.imul(m,Z)|0,n=n+Math.imul(h,Q)|0,i=i+Math.imul(h,ee)|0,i=i+Math.imul(d,Q)|0,o=o+Math.imul(d,ee)|0;var we=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(E,F),i=Math.imul(E,W),i=i+Math.imul(x,F)|0,o=Math.imul(x,W),n=n+Math.imul(S,V)|0,i=i+Math.imul(S,K)|0,i=i+Math.imul(O,V)|0,o=o+Math.imul(O,K)|0,n=n+Math.imul(w,J)|0,i=i+Math.imul(w,G)|0,i=i+Math.imul(_,J)|0,o=o+Math.imul(_,G)|0,n=n+Math.imul(y,Y)|0,i=i+Math.imul(y,Z)|0,i=i+Math.imul(v,Y)|0,o=o+Math.imul(v,Z)|0,n=n+Math.imul(p,Q)|0,i=i+Math.imul(p,ee)|0,i=i+Math.imul(m,Q)|0,o=o+Math.imul(m,ee)|0,n=n+Math.imul(h,re)|0,i=i+Math.imul(h,ne)|0,i=i+Math.imul(d,re)|0,o=o+Math.imul(d,ne)|0;var _e=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(j,F),i=Math.imul(j,W),i=i+Math.imul(R,F)|0,o=Math.imul(R,W),n=n+Math.imul(E,V)|0,i=i+Math.imul(E,K)|0,i=i+Math.imul(x,V)|0,o=o+Math.imul(x,K)|0,n=n+Math.imul(S,J)|0,i=i+Math.imul(S,G)|0,i=i+Math.imul(O,J)|0,o=o+Math.imul(O,G)|0,n=n+Math.imul(w,Y)|0,i=i+Math.imul(w,Z)|0,i=i+Math.imul(_,Y)|0,o=o+Math.imul(_,Z)|0,n=n+Math.imul(y,Q)|0,i=i+Math.imul(y,ee)|0,i=i+Math.imul(v,Q)|0,o=o+Math.imul(v,ee)|0,n=n+Math.imul(p,re)|0,i=i+Math.imul(p,ne)|0,i=i+Math.imul(m,re)|0,o=o+Math.imul(m,ne)|0,n=n+Math.imul(h,oe)|0,i=i+Math.imul(h,se)|0,i=i+Math.imul(d,oe)|0,o=o+Math.imul(d,se)|0;var Me=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul(C,F),i=Math.imul(C,W),i=i+Math.imul(T,F)|0,o=Math.imul(T,W),n=n+Math.imul(j,V)|0,i=i+Math.imul(j,K)|0,i=i+Math.imul(R,V)|0,o=o+Math.imul(R,K)|0,n=n+Math.imul(E,J)|0,i=i+Math.imul(E,G)|0,i=i+Math.imul(x,J)|0,o=o+Math.imul(x,G)|0,n=n+Math.imul(S,Y)|0,i=i+Math.imul(S,Z)|0,i=i+Math.imul(O,Y)|0,o=o+Math.imul(O,Z)|0,n=n+Math.imul(w,Q)|0,i=i+Math.imul(w,ee)|0,i=i+Math.imul(_,Q)|0,o=o+Math.imul(_,ee)|0,n=n+Math.imul(y,re)|0,i=i+Math.imul(y,ne)|0,i=i+Math.imul(v,re)|0,o=o+Math.imul(v,ne)|0,n=n+Math.imul(p,oe)|0,i=i+Math.imul(p,se)|0,i=i+Math.imul(m,oe)|0,o=o+Math.imul(m,se)|0,n=n+Math.imul(h,ue)|0,i=i+Math.imul(h,ce)|0,i=i+Math.imul(d,ue)|0,o=o+Math.imul(d,ce)|0;var Se=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(L,F),i=Math.imul(L,W),i=i+Math.imul(D,F)|0,o=Math.imul(D,W),n=n+Math.imul(C,V)|0,i=i+Math.imul(C,K)|0,i=i+Math.imul(T,V)|0,o=o+Math.imul(T,K)|0,n=n+Math.imul(j,J)|0,i=i+Math.imul(j,G)|0,i=i+Math.imul(R,J)|0,o=o+Math.imul(R,G)|0,n=n+Math.imul(E,Y)|0,i=i+Math.imul(E,Z)|0,i=i+Math.imul(x,Y)|0,o=o+Math.imul(x,Z)|0,n=n+Math.imul(S,Q)|0,i=i+Math.imul(S,ee)|0,i=i+Math.imul(O,Q)|0,o=o+Math.imul(O,ee)|0,n=n+Math.imul(w,re)|0,i=i+Math.imul(w,ne)|0,i=i+Math.imul(_,re)|0,o=o+Math.imul(_,ne)|0,n=n+Math.imul(y,oe)|0,i=i+Math.imul(y,se)|0,i=i+Math.imul(v,oe)|0,o=o+Math.imul(v,se)|0,n=n+Math.imul(p,ue)|0,i=i+Math.imul(p,ce)|0,i=i+Math.imul(m,ue)|0,o=o+Math.imul(m,ce)|0,n=n+Math.imul(h,he)|0,i=i+Math.imul(h,de)|0,i=i+Math.imul(d,he)|0,o=o+Math.imul(d,de)|0;var Oe=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(U,F),i=Math.imul(U,W),i=i+Math.imul(B,F)|0,o=Math.imul(B,W),n=n+Math.imul(L,V)|0,i=i+Math.imul(L,K)|0,i=i+Math.imul(D,V)|0,o=o+Math.imul(D,K)|0,n=n+Math.imul(C,J)|0,i=i+Math.imul(C,G)|0,i=i+Math.imul(T,J)|0,o=o+Math.imul(T,G)|0,n=n+Math.imul(j,Y)|0,i=i+Math.imul(j,Z)|0,i=i+Math.imul(R,Y)|0,o=o+Math.imul(R,Z)|0,n=n+Math.imul(E,Q)|0,i=i+Math.imul(E,ee)|0,i=i+Math.imul(x,Q)|0,o=o+Math.imul(x,ee)|0,n=n+Math.imul(S,re)|0,i=i+Math.imul(S,ne)|0,i=i+Math.imul(O,re)|0,o=o+Math.imul(O,ne)|0,n=n+Math.imul(w,oe)|0,i=i+Math.imul(w,se)|0,i=i+Math.imul(_,oe)|0,o=o+Math.imul(_,se)|0,n=n+Math.imul(y,ue)|0,i=i+Math.imul(y,ce)|0,i=i+Math.imul(v,ue)|0,o=o+Math.imul(v,ce)|0,n=n+Math.imul(p,he)|0,i=i+Math.imul(p,de)|0,i=i+Math.imul(m,he)|0,o=o+Math.imul(m,de)|0,n=n+Math.imul(h,pe)|0,i=i+Math.imul(h,me)|0,i=i+Math.imul(d,pe)|0,o=o+Math.imul(d,me)|0;var ke=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(U,V),i=Math.imul(U,K),i=i+Math.imul(B,V)|0,o=Math.imul(B,K),n=n+Math.imul(L,J)|0,i=i+Math.imul(L,G)|0,i=i+Math.imul(D,J)|0,o=o+Math.imul(D,G)|0,n=n+Math.imul(C,Y)|0,i=i+Math.imul(C,Z)|0,i=i+Math.imul(T,Y)|0,o=o+Math.imul(T,Z)|0,n=n+Math.imul(j,Q)|0,i=i+Math.imul(j,ee)|0,i=i+Math.imul(R,Q)|0,o=o+Math.imul(R,ee)|0,n=n+Math.imul(E,re)|0,i=i+Math.imul(E,ne)|0,i=i+Math.imul(x,re)|0,o=o+Math.imul(x,ne)|0,n=n+Math.imul(S,oe)|0,i=i+Math.imul(S,se)|0,i=i+Math.imul(O,oe)|0,o=o+Math.imul(O,se)|0,n=n+Math.imul(w,ue)|0,i=i+Math.imul(w,ce)|0,i=i+Math.imul(_,ue)|0,o=o+Math.imul(_,ce)|0,n=n+Math.imul(y,he)|0,i=i+Math.imul(y,de)|0,i=i+Math.imul(v,he)|0,o=o+Math.imul(v,de)|0,n=n+Math.imul(p,pe)|0,i=i+Math.imul(p,me)|0,i=i+Math.imul(m,pe)|0,o=o+Math.imul(m,me)|0;var Ee=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(U,J),i=Math.imul(U,G),i=i+Math.imul(B,J)|0,o=Math.imul(B,G),n=n+Math.imul(L,Y)|0,i=i+Math.imul(L,Z)|0,i=i+Math.imul(D,Y)|0,o=o+Math.imul(D,Z)|0,n=n+Math.imul(C,Q)|0,i=i+Math.imul(C,ee)|0,i=i+Math.imul(T,Q)|0,o=o+Math.imul(T,ee)|0,n=n+Math.imul(j,re)|0,i=i+Math.imul(j,ne)|0,i=i+Math.imul(R,re)|0,o=o+Math.imul(R,ne)|0,n=n+Math.imul(E,oe)|0,i=i+Math.imul(E,se)|0,i=i+Math.imul(x,oe)|0,o=o+Math.imul(x,se)|0,n=n+Math.imul(S,ue)|0,i=i+Math.imul(S,ce)|0,i=i+Math.imul(O,ue)|0,o=o+Math.imul(O,ce)|0,n=n+Math.imul(w,he)|0,i=i+Math.imul(w,de)|0,i=i+Math.imul(_,he)|0,o=o+Math.imul(_,de)|0,n=n+Math.imul(y,pe)|0,i=i+Math.imul(y,me)|0,i=i+Math.imul(v,pe)|0,o=o+Math.imul(v,me)|0;var xe=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(U,Y),i=Math.imul(U,Z),i=i+Math.imul(B,Y)|0,o=Math.imul(B,Z),n=n+Math.imul(L,Q)|0,i=i+Math.imul(L,ee)|0,i=i+Math.imul(D,Q)|0,o=o+Math.imul(D,ee)|0,n=n+Math.imul(C,re)|0,i=i+Math.imul(C,ne)|0,i=i+Math.imul(T,re)|0,o=o+Math.imul(T,ne)|0,n=n+Math.imul(j,oe)|0,i=i+Math.imul(j,se)|0,i=i+Math.imul(R,oe)|0,o=o+Math.imul(R,se)|0,n=n+Math.imul(E,ue)|0,i=i+Math.imul(E,ce)|0,i=i+Math.imul(x,ue)|0,o=o+Math.imul(x,ce)|0,n=n+Math.imul(S,he)|0,i=i+Math.imul(S,de)|0,i=i+Math.imul(O,he)|0,o=o+Math.imul(O,de)|0,n=n+Math.imul(w,pe)|0,i=i+Math.imul(w,me)|0,i=i+Math.imul(_,pe)|0,o=o+Math.imul(_,me)|0;var Pe=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(U,Q),i=Math.imul(U,ee),i=i+Math.imul(B,Q)|0,o=Math.imul(B,ee),n=n+Math.imul(L,re)|0,i=i+Math.imul(L,ne)|0,i=i+Math.imul(D,re)|0,o=o+Math.imul(D,ne)|0,n=n+Math.imul(C,oe)|0,i=i+Math.imul(C,se)|0,i=i+Math.imul(T,oe)|0,o=o+Math.imul(T,se)|0,n=n+Math.imul(j,ue)|0,i=i+Math.imul(j,ce)|0,i=i+Math.imul(R,ue)|0,o=o+Math.imul(R,ce)|0,n=n+Math.imul(E,he)|0,i=i+Math.imul(E,de)|0,i=i+Math.imul(x,he)|0,o=o+Math.imul(x,de)|0,n=n+Math.imul(S,pe)|0,i=i+Math.imul(S,me)|0,i=i+Math.imul(O,pe)|0,o=o+Math.imul(O,me)|0;var je=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(je>>>26)|0,je&=67108863,n=Math.imul(U,re),i=Math.imul(U,ne),i=i+Math.imul(B,re)|0,o=Math.imul(B,ne),n=n+Math.imul(L,oe)|0,i=i+Math.imul(L,se)|0,i=i+Math.imul(D,oe)|0,o=o+Math.imul(D,se)|0,n=n+Math.imul(C,ue)|0,i=i+Math.imul(C,ce)|0,i=i+Math.imul(T,ue)|0,o=o+Math.imul(T,ce)|0,n=n+Math.imul(j,he)|0,i=i+Math.imul(j,de)|0,i=i+Math.imul(R,he)|0,o=o+Math.imul(R,de)|0,n=n+Math.imul(E,pe)|0,i=i+Math.imul(E,me)|0,i=i+Math.imul(x,pe)|0,o=o+Math.imul(x,me)|0;var Re=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(U,oe),i=Math.imul(U,se),i=i+Math.imul(B,oe)|0,o=Math.imul(B,se),n=n+Math.imul(L,ue)|0,i=i+Math.imul(L,ce)|0,i=i+Math.imul(D,ue)|0,o=o+Math.imul(D,ce)|0,n=n+Math.imul(C,he)|0,i=i+Math.imul(C,de)|0,i=i+Math.imul(T,he)|0,o=o+Math.imul(T,de)|0,n=n+Math.imul(j,pe)|0,i=i+Math.imul(j,me)|0,i=i+Math.imul(R,pe)|0,o=o+Math.imul(R,me)|0;var Ae=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(U,ue),i=Math.imul(U,ce),i=i+Math.imul(B,ue)|0,o=Math.imul(B,ce),n=n+Math.imul(L,he)|0,i=i+Math.imul(L,de)|0,i=i+Math.imul(D,he)|0,o=o+Math.imul(D,de)|0,n=n+Math.imul(C,pe)|0,i=i+Math.imul(C,me)|0,i=i+Math.imul(T,pe)|0,o=o+Math.imul(T,me)|0;var Ce=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(U,he),i=Math.imul(U,de),i=i+Math.imul(B,he)|0,o=Math.imul(B,de),n=n+Math.imul(L,pe)|0,i=i+Math.imul(L,me)|0,i=i+Math.imul(D,pe)|0,o=o+Math.imul(D,me)|0;var Te=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(U,pe),i=Math.imul(U,me),i=i+Math.imul(B,pe)|0,o=Math.imul(B,me);var Ie=(c+n|0)+((8191&i)<<13)|0;return c=(o+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,u[0]=ge,u[1]=ye,u[2]=ve,u[3]=be,u[4]=we,u[5]=_e,u[6]=Me,u[7]=Se,u[8]=Oe,u[9]=ke,u[10]=Ee,u[11]=xe,u[12]=Pe,u[13]=je,u[14]=Re,u[15]=Ae,u[16]=Ce,u[17]=Te,u[18]=Ie,0!==c&&(u[19]=c,r.length++),r};function b(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,u=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=u;c++){var l=o-c,h=0|e.words[l],d=0|t.words[c],f=h*d,p=67108863&f;s=s+(f/67108864|0)|0,p=p+a|0,a=67108863&p,s=s+(p>>>26)|0,i+=s>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r._strip()}function w(e,t,r){return b(e,t,r)}function _(e,t){this.x=e,this.y=t}Math.imul||(v=y),o.prototype.mulTo=function(e,t){var r,n=this.length+e.length;return r=10===this.length&&10===e.length?v(this,e,t):n<63?y(this,e,t):n<1024?b(this,e,t):w(this,e,t),r},_.prototype.makeRBT=function(e){for(var t=new Array(e),r=o.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},_.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},_.prototype.permute=function(e,t,r,n,i,o){for(var s=0;s<o;s++)n[s]=t[e[s]],i[s]=r[e[s]]},_.prototype.transform=function(e,t,r,n,i,o){this.permute(o,e,t,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var h=u,d=c,f=0;f<s;f++){var p=r[l+f],m=n[l+f],g=r[l+f+s],y=n[l+f+s],v=h*g-d*y;y=h*y+d*g,g=v,r[l+f]=p+g,n[l+f]=m+y,r[l+f+s]=p-g,n[l+f+s]=m-y,f!==a&&(v=u*h-c*d,d=u*d+c*h,h=v)}},_.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},_.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},_.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},_.prototype.convert13b=function(e,t,r,i){for(var o=0,s=0;s<t;s++)o+=0|e[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*t;s<i;++s)r[s]=0;n(0===o),n(0===(-8192&o))},_.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},_.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),u=new Array(n),c=new Array(n),l=new Array(n),h=new Array(n),d=r.words;d.length=n,this.convert13b(e.words,e.length,s,n),this.convert13b(t.words,t.length,c,n),this.transform(s,o,a,u,n,i),this.transform(c,o,l,h,n,i);for(var f=0;f<n;f++){var p=a[f]*l[f]-u[f]*h[f];u[f]=a[f]*h[f]+u[f]*l[f],a[f]=p}return this.conjugate(a,u,n),this.transform(a,u,d,o,n,i),this.conjugate(d,o,n),this.normalize13b(d,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r._strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),w(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){var t=e<0;t&&(e=-e),n("number"===typeof e),n(e<67108864);for(var r=0,i=0;i<this.length;i++){var o=(0|this.words[i])*e,s=(67108863&o)+(67108863&r);r>>=26,r+=o/67108864|0,r+=s>>>26,this.words[i]=67108863&s}return 0!==r&&(this.words[i]=r,this.length++),t?this.ineg():this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=g(e);if(0===t.length)return new o(1);for(var r=this,n=0;n<t.length;n++,r=r.sqr())if(0!==t[n])break;if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(e){n("number"===typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&o,u=(0|this.words[t])-a<<r;this.words[t]=u|s,s=a>>>26-r}s&&(this.words[t]=s,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this._strip()},o.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,r){var i;n("number"===typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,s=Math.min((e-o)/26,this.length),a=67108863^67108863>>>o<<o,u=r;if(i-=s,i=Math.max(0,i),u){for(var c=0;c<s;c++)u.words[c]=this.words[c];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var h=0|this.words[c];this.words[c]=l<<26-o|h>>>o,l=h&a}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){n("number"===typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return!1;var o=this.words[r];return!!(o&i)},o.prototype.imaskn=function(e){n("number"===typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this._strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return n("number"===typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(n("number"===typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,r){var i,o,s=e.length+r;this._expand(s);var a=0;for(i=0;i<e.length;i++){o=(0|this.words[i+r])+a;var u=(0|e.words[i])*t;o-=67108863&u,a=(o>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)o=(0|this.words[i+r])+a,a=o>>26,this.words[i+r]=67108863&o;if(0===a)return this._strip();for(n(-1===a),a=0,i=0;i<this.length;i++)o=-(0|this.words[i])+a,a=o>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},o.prototype._wordDiv=function(e,t){var r=this.length-e.length,n=this.clone(),i=e,s=0|i.words[i.length-1],a=this._countBits(s);r=26-a,0!==r&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var u,c=n.length-i.length;if("mod"!==t){u=new o(null),u.length=c+1,u.words=new Array(u.length);for(var l=0;l<u.length;l++)u.words[l]=0}var h=n.clone()._ishlnsubmul(i,1,c);0===h.negative&&(n=h,u&&(u.words[c]=1));for(var d=c-1;d>=0;d--){var f=67108864*(0|n.words[i.length+d])+(0|n.words[i.length+d-1]);f=Math.min(f/s|0,67108863),n._ishlnsubmul(i,f,d);while(0!==n.negative)f--,n.negative=0,n._ishlnsubmul(i,1,d),n.isZero()||(n.negative^=1);u&&(u.words[d]=f)}return u&&u._strip(),n._strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:u||null,mod:n}},o.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(e)),{div:i,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modrn(e.words[0]))}:this._wordDiv(e,t);var i,s,a},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modrn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=(1<<26)%e,i=0,o=this.length-1;o>=0;o--)i=(r*i+(0|this.words[o]))%e;return t?-i:i},o.prototype.modn=function(e){return this.modrn(e)},o.prototype.idivn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*r;this.words[i]=o/e|0,r=o%e}return this._strip(),t?this.ineg():this},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();var i=new o(1),s=new o(0),a=new o(0),u=new o(1),c=0;while(t.isEven()&&r.isEven())t.iushrn(1),r.iushrn(1),++c;var l=r.clone(),h=t.clone();while(!t.isZero()){for(var d=0,f=1;0===(t.words[0]&f)&&d<26;++d,f<<=1);if(d>0){t.iushrn(d);while(d-- >0)(i.isOdd()||s.isOdd())&&(i.iadd(l),s.isub(h)),i.iushrn(1),s.iushrn(1)}for(var p=0,m=1;0===(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0){r.iushrn(p);while(p-- >0)(a.isOdd()||u.isOdd())&&(a.iadd(l),u.isub(h)),a.iushrn(1),u.iushrn(1)}t.cmp(r)>=0?(t.isub(r),i.isub(a),s.isub(u)):(r.isub(t),a.isub(i),u.isub(s))}return{a:a,b:u,gcd:r.iushln(c)}},o.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();var i,s=new o(1),a=new o(0),u=r.clone();while(t.cmpn(1)>0&&r.cmpn(1)>0){for(var c=0,l=1;0===(t.words[0]&l)&&c<26;++c,l<<=1);if(c>0){t.iushrn(c);while(c-- >0)s.isOdd()&&s.iadd(u),s.iushrn(1)}for(var h=0,d=1;0===(r.words[0]&d)&&h<26;++h,d<<=1);if(h>0){r.iushrn(h);while(h-- >0)a.isOdd()&&a.iadd(u),a.iushrn(1)}t.cmp(r)>=0?(t.isub(r),s.isub(a)):(r.isub(t),a.isub(s))}return i=0===t.cmpn(1)?s:a,i.cmpn(0)<0&&i.iadd(e),i},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);do{while(t.isEven())t.iushrn(1);while(r.isEven())r.iushrn(1);var i=t.cmp(r);if(i<0){var o=t;t=r,r=o}else if(0===i||0===r.cmpn(1))break;t.isub(r)}while(1);return r.iushln(n)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){n("number"===typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];a+=o,o=a>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new P(e)},o.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var M={k256:null,p224:null,p192:null,p25519:null};function S(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function O(){S.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function k(){S.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function E(){S.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){S.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function P(e){if("string"===typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function j(e){P.call(this,e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}S.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},S.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),t=r.bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},S.prototype.split=function(e,t){e.iushrn(this.n,0,t)},S.prototype.imulK=function(e){return e.imul(this.k)},i(O,S),O.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&r,i=10;i<e.length;i++){var s=0|e.words[i];e.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,e.words[i-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},O.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(k,S),i(E,S),i(x,S),x.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(M[e])return M[e];var t;if("k256"===e)t=new O;else if("p224"===e)t=new k;else if("p192"===e)t=new E;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new x}return M[e]=t,t},P.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},P.prototype._verify2=function(e,t){n(0===(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},P.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(l(e,e.umod(this.m)._forceRed(this)),e)},P.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},P.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},P.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},P.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},P.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},P.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},P.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},P.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},P.prototype.isqr=function(e){return this.imul(e,e.clone())},P.prototype.sqr=function(e){return this.mul(e,e)},P.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2===1),3===t){var r=this.m.add(new o(1)).iushrn(2);return this.pow(e,r)}var i=this.m.subn(1),s=0;while(!i.isZero()&&0===i.andln(1))s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();l=new o(2*l*l).toRed(this);while(0!==this.pow(l,c).cmp(u))l.redIAdd(u);var h=this.pow(l,i),d=this.pow(e,i.addn(1).iushrn(1)),f=this.pow(e,i),p=s;while(0!==f.cmp(a)){for(var m=f,g=0;0!==m.cmp(a);g++)m=m.redSqr();n(g<p);var y=this.pow(h,new o(1).iushln(p-g-1));d=d.redMul(y),h=y.redSqr(),f=f.redMul(h),p=g}return d},P.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},P.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=4,n=new Array(1<<r);n[0]=new o(1).toRed(this),n[1]=e;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],e);var s=n[0],a=0,u=0,c=t.bitLength()%26;for(0===c&&(c=26),i=t.length-1;i>=0;i--){for(var l=t.words[i],h=c-1;h>=0;h--){var d=l>>h&1;s!==n[0]&&(s=this.sqr(s)),0!==d||0!==a?(a<<=1,a|=d,u++,(u===r||0===i&&0===h)&&(s=this.mul(s,n[a]),u=0,a=0)):u=0}c=26}return s},P.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},P.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new j(e)},i(j,P),j.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},j.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},j.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},j.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},j.prototype.invm=function(e){var t=this.imod(e._invmp(this.m).mul(this.r2));return t._forceRed(this)}})(e,this)}).call(this,r("hOG+")(e))},N1pS:function(e,t){e.exports=a,a.default=a,a.stable=h,a.stableStringify=h;var r="[...]",n="[Circular]",i=[],o=[];function s(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function a(e,t,r,n){var a;"undefined"===typeof n&&(n=s()),c(e,"",0,[],void 0,0,n);try{a=0===o.length?JSON.stringify(e,t,r):JSON.stringify(e,f(t),r)}catch(l){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{while(0!==i.length){var u=i.pop();4===u.length?Object.defineProperty(u[0],u[1],u[3]):u[0][u[1]]=u[2]}}return a}function u(e,t,r,n){var s=Object.getOwnPropertyDescriptor(n,r);void 0!==s.get?s.configurable?(Object.defineProperty(n,r,{value:e}),i.push([n,r,t,s])):o.push([t,r,e]):(n[r]=e,i.push([n,r,t]))}function c(e,t,i,o,s,a,l){var h;if(a+=1,"object"===typeof e&&null!==e){for(h=0;h<o.length;h++)if(o[h]===e)return void u(n,e,t,s);if("undefined"!==typeof l.depthLimit&&a>l.depthLimit)return void u(r,e,t,s);if("undefined"!==typeof l.edgesLimit&&i+1>l.edgesLimit)return void u(r,e,t,s);if(o.push(e),Array.isArray(e))for(h=0;h<e.length;h++)c(e[h],h,h,o,e,a,l);else{var d=Object.keys(e);for(h=0;h<d.length;h++){var f=d[h];c(e[f],f,h,o,e,a,l)}}o.pop()}}function l(e,t){return e<t?-1:e>t?1:0}function h(e,t,r,n){"undefined"===typeof n&&(n=s());var a,u=d(e,"",0,[],void 0,0,n)||e;try{a=0===o.length?JSON.stringify(u,t,r):JSON.stringify(u,f(t),r)}catch(l){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{while(0!==i.length){var c=i.pop();4===c.length?Object.defineProperty(c[0],c[1],c[3]):c[0][c[1]]=c[2]}}return a}function d(e,t,o,s,a,c,h){var f;if(c+=1,"object"===typeof e&&null!==e){for(f=0;f<s.length;f++)if(s[f]===e)return void u(n,e,t,a);try{if("function"===typeof e.toJSON)return}catch(y){return}if("undefined"!==typeof h.depthLimit&&c>h.depthLimit)return void u(r,e,t,a);if("undefined"!==typeof h.edgesLimit&&o+1>h.edgesLimit)return void u(r,e,t,a);if(s.push(e),Array.isArray(e))for(f=0;f<e.length;f++)d(e[f],f,f,s,e,c,h);else{var p={},m=Object.keys(e).sort(l);for(f=0;f<m.length;f++){var g=m[f];d(e[g],g,f,s,e,c,h),p[g]=e[g]}if("undefined"===typeof a)return p;i.push([a,t,e]),a[t]=p}s.pop()}}function f(e){return e="undefined"!==typeof e?e:function(e,t){return t},function(t,r){if(o.length>0)for(var n=0;n<o.length;n++){var i=o[n];if(i[1]===t&&i[0]===r){r=i[2],o.splice(n,1);break}}return e.call(this,t,r)}}},Nsbk:function(e,t){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports["default"]=e.exports,r(t)}e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},OOKL:function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}var c=r("HDXh"),l=c.Buffer,h=r(22),d=h.inspect,f=d&&d.custom||"inspect";function p(e,t,r){l.prototype.copy.call(e,t,r)}e.exports=function(){function e(){s(this,e),this.head=null,this.tail=null,this.length=0}return u(e,[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";var t=this.head,r=""+t.data;while(t=t.next)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return l.alloc(0);var t=l.allocUnsafe(e>>>0),r=this.head,n=0;while(r)p(r.data,t,n),n+=r.data.length,r=r.next;return t}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;e-=n.length;while(t=t.next){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?n+=i:n+=i.slice(0,e),e-=o,0===e){o===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=l.allocUnsafe(e),r=this.head,n=1;r.data.copy(t),e-=r.data.length;while(r=r.next){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),e-=o,0===e){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,t}},{key:f,value:function(e,t){return d(this,i({},t,{depth:0,customInspect:!1}))}}]),e}()},PJYZ:function(e,t){function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},QILm:function(e,t,r){var n=r("8OQS");function i(e,t){if(null==e)return{};var r,i,o=n(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports},RF0s:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r("vUsp");function i(t,r){return void 0===r&&(r="utf8"),e.isBuffer(t)?a(t.toString("base64")):a(e.from(t,r).toString("base64"))}function o(t,r){return void 0===r&&(r="utf8"),e.from(s(t),"base64").toString(r)}function s(e){return e=e.toString(),n.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function a(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function u(t){return e.from(s(t),"base64")}var c=i;c.encode=i,c.decode=o,c.toBase64=s,c.fromBase64=a,c.toBuffer=u,t.default=c}).call(this,r("HDXh").Buffer)},RGXH:function(e,t){var r,n,i,o,s={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},a=function(e){throw{name:"SyntaxError",message:e,at:r,text:i}},u=function(e){return e&&e!==n&&a("Expected '"+e+"' instead of '"+n+"'"),n=i.charAt(r),r+=1,n},c=function(){var e,t="";"-"===n&&(t="-",u("-"));while(n>="0"&&n<="9")t+=n,u();if("."===n){t+=".";while(u()&&n>="0"&&n<="9")t+=n}if("e"===n||"E"===n){t+=n,u(),"-"!==n&&"+"!==n||(t+=n,u());while(n>="0"&&n<="9")t+=n,u()}if(e=+t,isFinite(e))return e;a("Bad number")},l=function(){var e,t,r,i="";if('"'===n)while(u()){if('"'===n)return u(),i;if("\\"===n)if(u(),"u"===n){for(r=0,t=0;t<4;t+=1){if(e=parseInt(u(),16),!isFinite(e))break;r=16*r+e}i+=String.fromCharCode(r)}else{if("string"!==typeof s[n])break;i+=s[n]}else i+=n}a("Bad string")},h=function(){while(n&&n<=" ")u()},d=function(){switch(n){case"t":return u("t"),u("r"),u("u"),u("e"),!0;case"f":return u("f"),u("a"),u("l"),u("s"),u("e"),!1;case"n":return u("n"),u("u"),u("l"),u("l"),null}a("Unexpected '"+n+"'")},f=function(){var e=[];if("["===n){if(u("["),h(),"]"===n)return u("]"),e;while(n){if(e.push(o()),h(),"]"===n)return u("]"),e;u(","),h()}}a("Bad array")},p=function(){var e,t={};if("{"===n){if(u("{"),h(),"}"===n)return u("}"),t;while(n){if(e=l(),h(),u(":"),Object.hasOwnProperty.call(t,e)&&a('Duplicate key "'+e+'"'),t[e]=o(),h(),"}"===n)return u("}"),t;u(","),h()}}a("Bad object")};o=function(){switch(h(),n){case"{":return p();case"[":return f();case'"':return l();case"-":return c();default:return n>="0"&&n<="9"?c():d()}},e.exports=function(e,t){var s;return i=e,r=0,n=" ",s=o(),h(),n&&a("Syntax error"),"function"===typeof t?function e(r,n){var i,o,s=r[n];if(s&&"object"===typeof s)for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(o=e(s,i),void 0!==o?s[i]=o:delete s[i]);return t.call(r,n,s)}({"":s},""):s}},RIqP:function(e,t,r){var n=r("Ijbi"),i=r("EbDI"),o=r("ZhPi"),s=r("Bnag");function a(e){return n(e)||i(e)||o(e)||s()}e.exports=a,e.exports.__esModule=!0,e.exports["default"]=e.exports},SksO:function(e,t){function r(t,n){return e.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports["default"]=e.exports,r(t,n)}e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},TCB8:function(e,t,r){e.exports=r("+qE3").EventEmitter},UpG2:function(e,t,r){"use strict";var n=r("xfhP").codes.ERR_STREAM_PREMATURE_CLOSE;function i(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}function o(){}function s(e){return e.setHeader&&"function"===typeof e.abort}function a(e,t,r){if("function"===typeof t)return a(e,null,t);t||(t={}),r=i(r||o);var u=t.readable||!1!==t.readable&&e.readable,c=t.writable||!1!==t.writable&&e.writable,l=function(){e.writable||d()},h=e._writableState&&e._writableState.finished,d=function(){c=!1,h=!0,u||r.call(e)},f=e._readableState&&e._readableState.endEmitted,p=function(){u=!1,f=!0,c||r.call(e)},m=function(t){r.call(e,t)},g=function(){var t;return u&&!f?(e._readableState&&e._readableState.ended||(t=new n),r.call(e,t)):c&&!h?(e._writableState&&e._writableState.ended||(t=new n),r.call(e,t)):void 0},y=function(){e.req.on("finish",d)};return s(e)?(e.on("complete",d),e.on("abort",g),e.req?y():e.on("request",y)):c&&!e._writableState&&(e.on("end",l),e.on("close",l)),e.on("end",p),e.on("finish",d),!1!==t.error&&e.on("error",m),e.on("close",g),function(){e.removeListener("complete",d),e.removeListener("abort",g),e.removeListener("request",y),e.req&&e.req.removeListener("finish",d),e.removeListener("end",l),e.removeListener("close",l),e.removeListener("finish",d),e.removeListener("end",p),e.removeListener("error",m),e.removeListener("close",g)}}e.exports=a},VmuJ:function(e,t,r){var n=r("1jOq");function i(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function o(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}e.exports=n(i),e.exports.strict=n(o),i.proto=i((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})}))},W8MJ:function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},WkPL:function(e,t){function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},XH0y:function(e,t,r){var n,i;(function(o,s){"use strict";n=s,i="function"===typeof n?n.call(t,r,t,e):n,void 0===i||(e.exports=i)})(0,(function(){"use strict";var e=function(){},t="undefined",r=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function i(e,t){var r=e[t];if("function"===typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(n){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function o(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function s(n){return"debug"===n&&(n="log"),typeof console!==t&&("trace"===n&&r?o:void 0!==console[n]?i(console,n):void 0!==console.log?i(console,"log"):e)}function a(t,r){for(var i=0;i<n.length;i++){var o=n[i];this[o]=i<t?e:this.methodFactory(o,t,r)}this.log=this.debug}function u(e,r,n){return function(){typeof console!==t&&(a.call(this,r,n),this[e].apply(this,arguments))}}function c(e,t,r){return s(e)||u.apply(this,arguments)}function l(e,r,i){var o,s=this;r=null==r?"WARN":r;var u="loglevel";function l(e){var r=(n[e]||"silent").toUpperCase();if(typeof window!==t&&u){try{return void(window.localStorage[u]=r)}catch(i){}try{window.document.cookie=encodeURIComponent(u)+"="+r+";"}catch(i){}}}function h(){var e;if(typeof window!==t&&u){try{e=window.localStorage[u]}catch(i){}if(typeof e===t)try{var r=window.document.cookie,n=r.indexOf(encodeURIComponent(u)+"=");-1!==n&&(e=/^([^;]+)/.exec(r.slice(n))[1])}catch(i){}return void 0===s.levels[e]&&(e=void 0),e}}function d(){if(typeof window!==t&&u){try{return void window.localStorage.removeItem(u)}catch(e){}try{window.document.cookie=encodeURIComponent(u)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}"string"===typeof e?u+=":"+e:"symbol"===typeof e&&(u=void 0),s.name=e,s.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},s.methodFactory=i||c,s.getLevel=function(){return o},s.setLevel=function(r,n){if("string"===typeof r&&void 0!==s.levels[r.toUpperCase()]&&(r=s.levels[r.toUpperCase()]),!("number"===typeof r&&r>=0&&r<=s.levels.SILENT))throw"log.setLevel() called with invalid level: "+r;if(o=r,!1!==n&&l(r),a.call(s,r,e),typeof console===t&&r<s.levels.SILENT)return"No console available for logging"},s.setDefaultLevel=function(e){r=e,h()||s.setLevel(e,!1)},s.resetLevel=function(){s.setLevel(r,!1),d()},s.enableAll=function(e){s.setLevel(s.levels.TRACE,e)},s.disableAll=function(e){s.setLevel(s.levels.SILENT,e)};var f=h();null==f&&(f=r),s.setLevel(f,!1)}var h=new l,d={};h.getLogger=function(e){if("symbol"!==typeof e&&"string"!==typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=d[e];return t||(t=d[e]=new l(e,h.getLevel(),h.methodFactory)),t};var f=typeof window!==t?window.log:void 0;return h.noConflict=function(){return typeof window!==t&&window.log===h&&(window.log=f),h},h.getLoggers=function(){return d},h["default"]=h,h}))},ZReu:function(e,t,r){"use strict";r.d(t,"a",(function(){return g})),r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return m})),r.d(t,"d",(function(){return h})),r.d(t,"e",(function(){return l}));var n=r("2oH+"),i=r.n(n);function o(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function s(e){try{u(n.next(e))}catch(t){o(t)}}function a(e){try{u(n["throw"](e))}catch(t){o(t)}}function u(e){e.done?r(e.value):i(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())}))}let s="torus-default",a="";const u="x-api-key",c="x-embed-host";function l(e){a=e}function h(e){s=e}function d(){const e={};return s&&(e[u]=s),a&&(e[c]=a),e}const f=(e,t)=>{const r=new Promise(((t,r)=>{const n=setTimeout((()=>{clearTimeout(n),r(new Error(`Timed out in ${e}ms`))}),e)}));return Promise.race([t,r])},p=(e,t={},r={})=>o(void 0,void 0,void 0,(function*(){const n={mode:"cors",headers:{}};r.useAPIKey&&(n.headers=Object.assign(Object.assign({},n.headers),d()));const o=i()(n,t,{method:"GET"}),s=yield fetch(e,o);if(s.ok)return s.json();throw s})),m=(e,t={},r={},n={})=>{const o={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};n.useAPIKey&&(o.headers=Object.assign(Object.assign({},o.headers),d()));const s=i()(o,r,{method:"POST"});return n.isUrlEncodedData?(s.body=t,"application/json; charset=utf-8"===s.headers["Content-Type"]&&delete s.headers["Content-Type"]):s.body=JSON.stringify(t),f(n.timeout||6e4,fetch(e,s).then((e=>{if(e.ok)return e.json();throw e})))},g=(e,t)=>({jsonrpc:"2.0",method:e,id:10,params:t})},ZhPi:function(e,t,r){var n=r("WkPL");function i(e,t){if(e){if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports},a1gu:function(e,t,r){var n=r("cDf5")["default"],i=r("PJYZ");function o(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)}e.exports=o,e.exports.__esModule=!0,e.exports["default"]=e.exports},aUsF:function(e,t,r){"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(i=n;0!==i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(o=Object.keys(t),n=o.length,n!==Object.keys(r).length)return!1;for(i=n;0!==i--;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;0!==i--;){var s=o[i];if(!e(t[s],r[s]))return!1}return!0}return t!==t&&r!==r}},b1mx:function(e,t,r){(function(t){var n=r("VmuJ"),i=r("q1Jy"),o=r(23),s=function(){},a=/^v?\.0/.test(t.version),u=function(e){return"function"===typeof e},c=function(e){return!!a&&(!!o&&((e instanceof(o.ReadStream||s)||e instanceof(o.WriteStream||s))&&u(e.close)))},l=function(e){return e.setHeader&&u(e.abort)},h=function(e,t,r,o){o=n(o);var a=!1;e.on("close",(function(){a=!0})),i(e,{readable:t,writable:r},(function(e){if(e)return o(e);a=!0,o()}));var h=!1;return function(t){if(!a&&!h)return h=!0,c(e)?e.close(s):l(e)?e.abort():u(e.destroy)?e.destroy():void o(t||new Error("stream was destroyed"))}},d=function(e){e()},f=function(e,t){return e.pipe(t)},p=function(){var e,t=Array.prototype.slice.call(arguments),r=u(t[t.length-1]||s)&&t.pop()||s;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var n=t.map((function(i,o){var s=o<t.length-1,a=o>0;return h(i,s,a,(function(t){e||(e=t),t&&n.forEach(d),s||(n.forEach(d),r(e))}))}));return t.reduce(f)};e.exports=p}).call(this,r("Q2Ig"))},b48C:function(e,t){function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},bXnx:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ethErrors=void 0;const n=r("42mr"),i=r("KWYN"),o=r("4BfN");function s(e,t){const[r,o]=u(t);return new n.EthereumRpcError(e,r||i.getMessageFromCode(e),o)}function a(e,t){const[r,o]=u(t);return new n.EthereumProviderError(e,r||i.getMessageFromCode(e),o)}function u(e){if(e){if("string"===typeof e)return[e];if("object"===typeof e&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&"string"!==typeof t)throw new Error("Must specify string message.");return[t||void 0,r]}}return[]}t.ethErrors={rpc:{parse:e=>s(o.errorCodes.rpc.parse,e),invalidRequest:e=>s(o.errorCodes.rpc.invalidRequest,e),invalidParams:e=>s(o.errorCodes.rpc.invalidParams,e),methodNotFound:e=>s(o.errorCodes.rpc.methodNotFound,e),internal:e=>s(o.errorCodes.rpc.internal,e),server:e=>{if(!e||"object"!==typeof e||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return s(t,e)},invalidInput:e=>s(o.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>s(o.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>s(o.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>s(o.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>s(o.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>s(o.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>a(o.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>a(o.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>a(o.errorCodes.provider.unsupportedMethod,e),disconnected:e=>a(o.errorCodes.provider.disconnected,e),chainDisconnected:e=>a(o.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||"object"!==typeof e||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:r,data:i}=e;if(!r||"string"!==typeof r)throw new Error('"message" must be a nonempty string');return new n.EthereumProviderError(t,r,i)}}}},cDf5:function(e,t){function r(t){return e.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports["default"]=e.exports,r(t)}e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},calI:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableStore=void 0;const i=n(r("Fj00"));class o extends i.default{constructor(e){super(),this._state=e||{}}getState(){return this._getState()}putState(e){this._putState(e),this.emit("update",e)}updateState(e){if(e&&"object"===typeof e){const t=this.getState();this.putState(Object.assign(Object.assign({},t),e))}else this.putState(e)}subscribe(e){this.on("update",e)}unsubscribe(e){this.removeListener("update",e)}_getState(){return this._state}_putState(e){this._state=e}}t.ObservableStore=o},dsut:function(e,t,r){t.parse=r("RGXH"),t.stringify=r("uPSP")},"jNV+":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageFromCode=t.serializeError=t.EthereumProviderError=t.EthereumRpcError=t.ethErrors=t.errorCodes=void 0;const n=r("42mr");Object.defineProperty(t,"EthereumRpcError",{enumerable:!0,get:function(){return n.EthereumRpcError}}),Object.defineProperty(t,"EthereumProviderError",{enumerable:!0,get:function(){return n.EthereumProviderError}});const i=r("KWYN");Object.defineProperty(t,"serializeError",{enumerable:!0,get:function(){return i.serializeError}}),Object.defineProperty(t,"getMessageFromCode",{enumerable:!0,get:function(){return i.getMessageFromCode}});const o=r("bXnx");Object.defineProperty(t,"ethErrors",{enumerable:!0,get:function(){return o.ethErrors}});const s=r("4BfN");Object.defineProperty(t,"errorCodes",{enumerable:!0,get:function(){return s.errorCodes}})},jO4z:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return c}));var n=r("Edxu"),i=r.n(n),o=(r("lSNA"),r("+00W")),s=r.n(o),a=r("aYMp"),u=r.n(a);const c=()=>i()(32).toString("hex");URL;s.a;u.a}).call(this,r("HDXh").Buffer)},jYwt:function(e,t,r){"use strict";(function(t,n){function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){K(t,e)}}var o;e.exports=P,P.WritableState=x;var s={deprecate:r("t9FE")},a=r("TCB8"),u=r("HDXh").Buffer,c=t.Uint8Array||function(){};function l(e){return u.from(e)}function h(e){return u.isBuffer(e)||e instanceof c}var d,f=r("mLEo"),p=r("K0MK"),m=p.getHighWaterMark,g=r("xfhP").codes,y=g.ERR_INVALID_ARG_TYPE,v=g.ERR_METHOD_NOT_IMPLEMENTED,b=g.ERR_MULTIPLE_CALLBACK,w=g.ERR_STREAM_CANNOT_PIPE,_=g.ERR_STREAM_DESTROYED,M=g.ERR_STREAM_NULL_VALUES,S=g.ERR_STREAM_WRITE_AFTER_END,O=g.ERR_UNKNOWN_ENCODING,k=f.errorOrDestroy;function E(){}function x(e,t,n){o=o||r("CPG7"),e=e||{},"boolean"!==typeof n&&(n=t instanceof o),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=m(this,e,"writableHighWaterMark",n),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){D(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function P(e){o=o||r("CPG7");var t=this instanceof o;if(!t&&!d.call(P,this))return new P(e);this._writableState=new x(e,this,t),this.writable=!0,e&&("function"===typeof e.write&&(this._write=e.write),"function"===typeof e.writev&&(this._writev=e.writev),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.final&&(this._final=e.final)),a.call(this)}function j(e,t){var r=new S;k(e,r),n.nextTick(t,r)}function R(e,t,r,i){var o;return null===r?o=new M:"string"===typeof r||t.objectMode||(o=new y("chunk",["string","Buffer"],r)),!o||(k(e,o),n.nextTick(i,o),!1)}function A(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!==typeof t||(t=u.from(t,r)),t}function C(e,t,r,n,i,o){if(!r){var s=A(t,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else T(e,t,!1,a,n,i,o);return u}function T(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new _("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function I(e,t,r,i,o){--t.pendingcb,r?(n.nextTick(o,i),n.nextTick(H,e,t),e._writableState.errorEmitted=!0,k(e,i)):(o(i),e._writableState.errorEmitted=!0,k(e,i),H(e,t))}function L(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function D(e,t){var r=e._writableState,i=r.sync,o=r.writecb;if("function"!==typeof o)throw new b;if(L(r),t)I(e,r,i,t,o);else{var s=q(r)||e.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||B(e,r),i?n.nextTick(N,e,r,s,o):N(e,r,s,o)}}function N(e,t,r,n){r||U(e,t),t.pendingcb--,n(),H(e,t)}function U(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function B(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,o=new Array(n),s=t.corkedRequestsFree;s.entry=r;var a=0,u=!0;while(r)o[a]=r,r.isBuf||(u=!1),r=r.next,a+=1;o.allBuffers=u,T(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{while(r){var c=r.chunk,l=r.encoding,h=r.callback,d=t.objectMode?1:c.length;if(T(e,t,!1,d,c,l,h),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function q(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function F(e,t){e._final((function(r){t.pendingcb--,r&&k(e,r),t.prefinished=!0,e.emit("prefinish"),H(e,t)}))}function W(e,t){t.prefinished||t.finalCalled||("function"!==typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(F,e,t)))}function H(e,t){var r=q(t);if(r&&(W(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}function V(e,t,r){t.ending=!0,H(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function K(e,t,r){var n=e.entry;e.entry=null;while(n){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}r("P7XM")(P,a),x.prototype.getBuffer=function(){var e=this.bufferedRequest,t=[];while(e)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(x.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(P,Symbol.hasInstance,{value:function(e){return!!d.call(this,e)||this===P&&(e&&e._writableState instanceof x)}})):d=function(e){return e instanceof this},P.prototype.pipe=function(){k(this,new w)},P.prototype.write=function(e,t,r){var n=this._writableState,i=!1,o=!n.objectMode&&h(e);return o&&!u.isBuffer(e)&&(e=l(e)),"function"===typeof t&&(r=t,t=null),o?t="buffer":t||(t=n.defaultEncoding),"function"!==typeof r&&(r=E),n.ending?j(this,r):(o||R(this,n,e,r))&&(n.pendingcb++,i=C(this,n,o,e,t,r)),i},P.prototype.cork=function(){this._writableState.corked++},P.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||B(this,e))},P.prototype.setDefaultEncoding=function(e){if("string"===typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new O(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(P.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(P.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),P.prototype._write=function(e,t,r){r(new v("_write()"))},P.prototype._writev=null,P.prototype.end=function(e,t,r){var n=this._writableState;return"function"===typeof e?(r=e,e=null,t=null):"function"===typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||V(this,n,r),this},Object.defineProperty(P.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),P.prototype.destroy=f.destroy,P.prototype._undestroy=f.undestroy,P.prototype._destroy=function(e,t){t(e)}}).call(this,r("IyRk"),r("Q2Ig"))},lSNA:function(e,t){function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},lbJU:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r("7A9p"),t),i(r("+69w"),t),i(r("6BdJ"),t),i(r("calI"),t),i(r("9FKY"),t)},lwsE:function(e,t){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},lyE6:function(e,t,r){"use strict";r.r(t),r.d(t,"BUTTON_POSITION",(function(){return fe})),r.d(t,"LOGIN_PROVIDER",(function(){return ce})),r.d(t,"PAYMENT_PROVIDER",(function(){return he})),r.d(t,"TORUS_BUILD_ENV",(function(){return de})),r.d(t,"TorusInpageProvider",(function(){return Fe})),r.d(t,"WALLET_OPENLOGIN_VERIFIER_MAP",(function(){return le})),r.d(t,"default",(function(){return st}));var n=r("QILm"),i=r.n(n),o=r("lSNA"),s=r.n(o),a=r("bhFO"),u=r.n(a),c=r("W6Pm");const l={ROPSTEN:"ropsten",MAINNET:"mainnet"},h=[{constant:!0,inputs:[],name:"currentEpoch",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"epoch",type:"uint256"}],name:"getEpochInfo",outputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"n",type:"uint256"},{internalType:"uint256",name:"k",type:"uint256"},{internalType:"uint256",name:"t",type:"uint256"},{internalType:"address[]",name:"nodeList",type:"address[]"},{internalType:"uint256",name:"prevEpoch",type:"uint256"},{internalType:"uint256",name:"nextEpoch",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"nodeAddress",type:"address"}],name:"getNodeDetails",outputs:[{internalType:"string",name:"declaredIp",type:"string"},{internalType:"uint256",name:"position",type:"uint256"},{internalType:"uint256",name:"pubKx",type:"uint256"},{internalType:"uint256",name:"pubKy",type:"uint256"},{internalType:"string",name:"tmP2PListenAddress",type:"string"},{internalType:"string",name:"p2pListenAddress",type:"string"}],payable:!1,stateMutability:"view",type:"function"}];function d(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function s(e){try{u(n.next(e))}catch(t){o(t)}}function a(e){try{u(n["throw"](e))}catch(t){o(t)}}function u(e){e.done?r(e.value):i(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())}))}class f{constructor({network:e=l.MAINNET,proxyAddress:t="0x638646503746d5456209e33a2ff5e3226d698bea"}={}){let r;this._currentEpoch="19",this._torusNodeEndpoints=["https://torus-19.torusnode.com/jrpc","https://torus-node.ens.domains/jrpc","https://torus-node.matic.network/jrpc","https://torus.zilliqa.network/jrpc","https://torus-mainnet.cosmos.network/jrpc","https://torus2.etherscan.com/jrpc","https://torus-node-v2.skalelabs.com/jrpc","https://torus-node.binancex.dev/jrpc","https://torusnode.ont.io/jrpc"],this._torusNodePub=[{X:"bbe83c64177c3775550e6ba6ac2bc059f6847d644c9e4894e42c60d7974d8c2b",Y:"82b49a7caf70def38cdad2740af45c1e4f969650105c5019a29bb18b21a9acb5"},{X:"c208cac4ef9a47d386097a9c915b28e9cb89213abee8d26a17198ee261201b0d",Y:"c7db2fe4631109f40833de9dc78d07e35706549ee48fa557b33e4e75e1047873"},{X:"ca1766bb426d4ca5582818a0c5439d560ea64f5baa060793ab29dd3d0ceacfe",Y:"d46c1d08c40e1306e1bca328c2287b8268166b11a1ba4b8442ea2ad0c5e32152"},{X:"c3934dd2f6f4b3d2e1e398cc501e143c1e1a381b52feb6d1525af34d16253768",Y:"71f5141a5035799099f5ea3e241e66946bc55dc857ac3bd7d6fcdb8dcd3eeeef"},{X:"22e66f1929631d00bf026227581597f085fd94fd952fc0dca9f0833398b5c064",Y:"6088b3912e10a1e9d50355a609c10db7d188f16a2e2fd7357e51bf4f6a74f0a1"},{X:"9dc9fa410f3ce9eb70df70cdea00a49f2c4cc7a31c08c0dab5f863ed35ff5139",Y:"627a291cb87a75c61da3f65d6818e1e05e360217179817ed27e8c73bca7ec122"},{X:"118b9fc07e97b096d899b9f6658463ce6a8caa64038e37fc969df4e6023dd8c6",Y:"baf9fa4e51770f4796ea165dd03a769b8606681a38954a0a92c4cbffd6609ce9"},{X:"8a6d8b925da15a273dec3d8f8395ec35cd6878f274b2b180e4e106999db64043",Y:"96f67f870c157743da0b1eb84d89bf30500d74dc84c11f501ee1cb013acc8c46"},{X:"39cecb62e863729f572f7dfc46c24867981bf04bb405fed0df39e33984bfade5",Y:"61c2364434012e68a2be2e9952805037e52629d7762fafc8e10e9fb5bad8f790"}],this._torusIndexes=[1,2,3,4,5,6,7,8,9],this._network=l.MAINNET;try{const t=new URL(e);r=t.href}catch(n){const t="b8cdb0e4cff24599a286bf8e87ff1c96";r=`https://${e}.infura.io/v3/${t}`}u.a.setProvider(r),this.nodeListContract=new u.a(h,t),this.nodeListAddress=t,this.updated=!1,this._network=e}get _nodeDetails(){return{currentEpoch:this._currentEpoch,nodeListAddress:this.nodeListAddress,torusNodeEndpoints:this._torusNodeEndpoints,torusNodePub:this._torusNodePub,torusIndexes:this._torusIndexes,updated:this.updated}}getCurrentEpoch(){return this.nodeListContract.methods.currentEpoch().call()}getEpochInfo(e){return this.nodeListContract.methods.getEpochInfo(e).call()}getNodeEndpoint(e){return this.nodeListContract.methods.getNodeDetails(e).call()}getNodeDetails(e=!1,t=!1){return d(this,void 0,void 0,(function*(){try{if(e&&this._network===l.MAINNET)return this._nodeDetails;if(this.updated)return this._nodeDetails;const r=yield this.getCurrentEpoch();if(t&&this._network===l.MAINNET&&r===this._currentEpoch)return this._nodeDetails;this._currentEpoch=r;const n=yield this.getEpochInfo(r),i=n.nodeList.map(((e,t)=>t+1));this._torusIndexes=i;const o=n.nodeList.map((e=>this.getNodeEndpoint(e))),s=yield Promise.all(o),a=[],u=[];for(let e=0;e<s.length;e+=1){const t=s[e],r=`https://${t.declaredIp.split(":")[0]}/jrpc`;a.push(r),u.push({X:Object(c["toHex"])(t.pubKx).replace("0x",""),Y:Object(c["toHex"])(t.pubKy).replace("0x","")})}return this._torusNodeEndpoints=a,this._torusNodePub=u,this.updated=!0,this._nodeDetails}catch(r){return this._nodeDetails}}))}}var p=r("ZReu"),m=r("s4eT"),g=r("jO4z"),y=r("+qE3"),v=r("N1pS"),b=r.n(v),w=r("q1Jy"),_=r.n(w),M=r("VmuJ"),S=r.n(M),O=r("b1mx"),k=r.n(O);function E(){}const x="SYN",P="ACK",j="BRK";class R extends m["Duplex"]{constructor(e){let{name:t,target:r,targetWindow:n=window,targetOrigin:i="*"}=e;if(super({objectMode:!0}),s()(this,"_init",void 0),s()(this,"_haveSyn",void 0),s()(this,"_name",void 0),s()(this,"_target",void 0),s()(this,"_targetWindow",void 0),s()(this,"_targetOrigin",void 0),s()(this,"_onMessage",void 0),s()(this,"_synIntervalId",void 0),!t||!r)throw new Error("Invalid input.");this._init=!1,this._haveSyn=!1,this._name=t,this._target=r,this._targetWindow=n,this._targetOrigin=i,this._onMessage=this.onMessage.bind(this),this._synIntervalId=null,window.addEventListener("message",this._onMessage,!1),this._handShake()}_break(){this.cork(),this._write(j,null,E),this._haveSyn=!1,this._init=!1}_handShake(){this._write(x,null,E),this.cork()}_onData(e){if(this._init)if(e===j)this._break();else try{this.push(e)}catch(t){this.emit("error",t)}else e===x?(this._haveSyn=!0,this._write(P,null,E)):e===P&&(this._init=!0,this._haveSyn||this._write(P,null,E),this.uncork())}_postMessage(e){const t=this._targetOrigin;this._targetWindow.postMessage({target:this._target,data:e},t)}onMessage(e){const t=e.data;"*"!==this._targetOrigin&&e.origin!==this._targetOrigin||e.source!==this._targetWindow||"object"!==typeof t||t.target!==this._name||!t.data||this._onData(t.data)}_read(){}_write(e,t,r){this._postMessage(e),r()}_destroy(){window.removeEventListener("message",this._onMessage,!1)}}function A(e,t,r){try{Reflect.apply(e,t,r)}catch(n){setTimeout((()=>{throw n}))}}function C(e){const t=e.length,r=new Array(t);for(let n=0;n<t;n+=1)r[n]=e[n];return r}class T extends y["EventEmitter"]{emit(e){let t="error"===e;const r=this._events;if(void 0!==r)t=t&&void 0===r.error;else if(!t)return!1;for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];if(t){let e;if(i.length>0&&([e]=i),e instanceof Error)throw e;const t=new Error("Unhandled error.".concat(e?" (".concat(e.message,")"):""));throw t.context=e,t}const s=r[e];if(void 0===s)return!1;if("function"===typeof s)A(s,this,i);else{const e=s.length,t=C(s);for(let r=0;r<e;r+=1)A(t[r],this,i)}return!0}}class I extends Error{constructor(e){let{code:t,message:r,data:n}=e;if(!Number.isInteger(t))throw new Error("code must be an integer");if(!r||"string"!==typeof r)throw new Error("message must be string");super(r),s()(this,"code",void 0),s()(this,"data",void 0),this.code=t,void 0!==n&&(this.data=n)}toString(){return b()({code:this.code,message:this.message,data:this.data,stack:this.stack})}}function L(e){return e.toString()}function D(){const e={};function t(){return!1}const r=new T;function n(t){const r=e[t.id];if(!r)throw new Error('StreamMiddleware - Unknown response id "'.concat(t.id,'"'));delete e[t.id],Object.assign(r.res,t),setTimeout(r.end)}function i(e){r.emit("notification",e)}function o(e,t,r){let o;try{const t=!e.id;t?i(e):n(e)}catch(s){o=s}r(o)}const s=new m["Duplex"]({objectMode:!0,read:t,write:o}),a=(t,r,n,i)=>{s.push(t),e[t.id]={req:t,res:r,next:n,end:i}};return{events:r,middleware:a,stream:s}}function N(){return(e,t,r,n)=>{const i=e.id,o=Object(g["a"])();e.id=o,t.id=o,r((r=>{e.id=i,t.id=i,r()}))}}function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class q extends T{constructor(){super(),s()(this,"_middleware",void 0),this._middleware=[]}static async _runAllMiddleware(e,t,r){const n=[];let i=null,o=!1;for(const s of r)if([i,o]=await q._runMiddleware(e,t,s,n),o)break;return[i,o,n.reverse()]}static _runMiddleware(e,t,r,n){return new Promise((i=>{const o=e=>{const r=e||t.error;r&&(t.error=L(r)),i([r,!0])},s=e=>{t.error?o(t.error):(e&&("function"!==typeof e&&o(new I({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),n.push(e)),i([null,!1]))};try{r(e,t,s,o)}catch(a){o(a)}}))}static async _runReturnHandlers(e){for(const t of e)await new Promise(((e,r)=>{t((t=>t?r(t):e()))}))}static _checkForCompletion(e,t,r){if(!("result"in t)&&!("error"in t))throw new I({code:-32603,message:"Response has no error or result for request"});if(!r)throw new I({code:-32603,message:"Nothing ended request"})}push(e){this._middleware.push(e)}handle(e,t){if(t&&"function"!==typeof t)throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?this._handleBatch(e,t):this._handleBatch(e):t?this._handle(e,t):this._promiseHandle(e)}asMiddleware(){return async(e,t,r,n)=>{try{const[i,o,s]=await q._runAllMiddleware(e,t,this._middleware);return o?(await q._runReturnHandlers(s),n(i)):r((async e=>{try{await q._runReturnHandlers(s)}catch(t){return e(t)}return e()}))}catch(i){return n(i)}}}async _handleBatch(e,t){try{const r=await Promise.all(e.map(this._promiseHandle.bind(this)));return t?t(null,r):r}catch(r){if(t)return t(r);throw r}}_promiseHandle(e){return new Promise((t=>{this._handle(e,((e,r)=>{t(r)}))}))}async _handle(e,t){if(!e||Array.isArray(e)||"object"!==typeof e){const e=new I({code:-32603,message:"request must be plain object"});return t(e,{id:void 0,jsonrpc:"2.0",error:e})}if("string"!==typeof e.method){const r=new I({code:-32603,message:"method must be string"});return t(r,{id:e.id,jsonrpc:"2.0",error:r})}const r=B({},e),n={id:r.id,jsonrpc:r.jsonrpc};let i=null;try{await this._processRequest(r,n)}catch(o){i=o}return i&&(delete n.result,n.error||(n.error=L(i))),t(i,n)}async _processRequest(e,t){const[r,n,i]=await q._runAllMiddleware(e,t,this._middleware);if(q._checkForCompletion(e,t,n),await q._runReturnHandlers(i),r)throw r}}class F extends m["Duplex"]{constructor(e){let{parent:t,name:r}=e;super({objectMode:!0}),s()(this,"_parent",void 0),s()(this,"_name",void 0),this._parent=t,this._name=r}_read(){}_write(e,t,r){this._parent.push({name:this._name,data:e}),r()}}function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const V=Symbol("IGNORE_SUBSTREAM");class K extends m["Duplex"]{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(H(H({},e),{},{objectMode:!0})),s()(this,"_substreams",void 0),s()(this,"getStream",void 0),this._substreams={}}createStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error('ObjectMultiplex - Substream for name "'.concat(e,'" already exists'));const t=new F({parent:this,name:e});return this._substreams[e]=t,z(this,(e=>t.destroy(e||void 0))),t}ignoreStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error('ObjectMultiplex - Substream for name "'.concat(e,'" already exists'));this._substreams[e]=V}_read(){}_write(e,t,r){const{name:n,data:i}=e;if(!n)return window.console.warn('ObjectMultiplex - malformed chunk without name "'.concat(e,'"')),r();const o=this._substreams[n];return o?(o!==V&&o.push(i),r()):(window.console.warn('ObjectMultiplex - orphaned data for stream "'.concat(n,'"')),r())}}function z(e,t){const r=S()(t);_()(e,{readable:!1},r),_()(e,{writable:!1},r)}function J(e){const t=new K;return t.getStream=function(e){return this._substreams[e]?this._substreams[e]:this.createStream(e)},k()(e,t,e,(e=>{e&&window.console.error(e)})),t}var G=r("FGWJ"),X=r("2oH+"),Y=r.n(X),Z=r("lbJU"),$=r("jNV+"),Q=r("aUsF"),ee=r.n(Q);function te(e){return null!==e&&"object"===typeof e&&"function"===typeof e.pipe}function re(e){return te(e)&&!1!==e.writable&&"function"===typeof e._write&&"object"===typeof e._writableState}function ne(e){return te(e)&&!1!==e.readable&&"function"===typeof e._read&&"object"===typeof e._readableState}function ie(e){return re(e)&&ne(e)}var oe=r("XH0y"),se=r.n(oe),ae=r("mObS"),ue=r.n(ae);const ce={GOOGLE:"google",FACEBOOK:"facebook",TWITCH:"twitch",REDDIT:"reddit",DISCORD:"discord"},le={[ce.GOOGLE]:"tkey-google",[ce.FACEBOOK]:"tkey-facebook",[ce.TWITCH]:"tkey-twitch",[ce.REDDIT]:"tkey-reddit",[ce.DISCORD]:"tkey-discord"},he={MOONPAY:"moonpay",WYRE:"wyre",RAMPNETWORK:"rampnetwork",XANPOOL:"xanpool",MERCURYO:"mercuryo",TRANSAK:"transak"},de={PRODUCTION:"production",DEVELOPMENT:"development",BINANCE:"binance",TESTING:"testing",LRC:"lrc",BETA:"beta"},fe={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"},pe={[he.RAMPNETWORK]:{line1:"Debit Card/ Apple Pay/ Bank transfer",line2:"0.49% - 2.9%",line3:"5,000\u20ac/purchase, 20,000\u20ac/mo",supportPage:"https://instant.ramp.network/",minOrderValue:50,maxOrderValue:2e4,validCurrencies:["GBP","EUR","USD"],validCryptoCurrencies:["ETH","DAI","USDC","BSC_BNB"],includeFees:!0,enforceMax:!1},[he.MOONPAY]:{line1:"Credit / Debit Card / Apple Pay",line2:"4.5% or 5 USD",line3:"2,000\u20ac/day, 10,000\u20ac/mo",supportPage:"https://help.moonpay.io/en/",minOrderValue:24.99,maxOrderValue:5e4,validCurrencies:["USD","EUR","GBP","AUD","CAD","SGD","RUB"],validCryptoCurrencies:["ETH","DAI","TUSD","USDC","USDT","BNB_BSC","BUSD_BSC"],includeFees:!0,enforceMax:!1},[he.WYRE]:{line1:"Apple Pay/ Debit/ Credit Card",line2:"4.9% + 30\xa2 or 5 USD",line3:"$250/day",supportPage:"https://support.sendwyre.com/en/",minOrderValue:5,maxOrderValue:500,validCurrencies:["USD","AUD","CAD","GBP","EUR"],validCryptoCurrencies:["ETH","DAI","USDC","USDT"],includeFees:!1,enforceMax:!1},[he.XANPOOL]:{line1:"PayNow/ InstaPay/ FPS/ GoJekPay/ UPI/ PromptPay/ VietelPay/ DuitNow",line2:"2.5% buying, 3% selling",line3:"$2,500 / day",supportPage:"mailto:support@xanpool.com",minOrderValue:100,maxOrderValue:2500,validCurrencies:["SGD","HKD","MYR","PHP","INR","VND","THB","IDR"],validCryptoCurrencies:["ETH","USDT"],includeFees:!0,sell:!0,enforceMax:!1},[he.MERCURYO]:{line1:"Credit/ Debit Card/ Apple Pay",line2:"3.95% or 4 USD",line3:"10,000\u20ac/day, 25,000\u20ac/mo",supportPage:"mailto:support@mercuryo.io",minOrderValue:30,maxOrderValue:5e3,validCurrencies:["USD","EUR","RUB","TRY","GBP","UAH"],validCryptoCurrencies:["ETH","DAI","BAT","USDT","OKB"],includeFees:!0,enforceMax:!1},[he.TRANSAK]:{line1:"Credit/ Debit Card/ <br/>Bank Transfer (sepa/gbp)",line2:"0.99% - 5.5% or 5 USD",line3:"500\u20ac/day",supportPage:"https://support.transak.com/hc/en-US",minOrderValue:20,maxOrderValue:500,validCurrencies:["USD","EUR","GBP","AUD","CAD","SGD"],validCryptoCurrencies:["ETH","DAI","USDC","USDT"],includeFees:!0,enforceMax:!1}},me={en:{embed:{continue:"Continue",actionRequired:"Authorization required",pendingAction:"Click continue to proceed with your request in a popup",cookiesRequired:"Cookies Required",enableCookies:"Please enable cookies in your browser preferences to access Torus",clickHere:"More Info"}},de:{embed:{continue:"Fortsetzen",actionRequired:"Autorisierung erforderlich",pendingAction:"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren",cookiesRequired:"Cookies ben\xf6tigt",enableCookies:"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen",clickHere:"Mehr Info"}},ja:{embed:{continue:"\u7d99\u7d9a\u3059\u308b",actionRequired:"\u8a8d\u8a3c\u304c\u5fc5\u8981\u3067\u3059",pendingAction:"\u7d9a\u884c\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\u30dd\u30c3\u30d7\u30a2\u30c3\u30d7\u3067\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u7d9a\u884c\u3057\u307e\u3059",cookiesRequired:"\u5fc5\u8981\u306a\u30af\u30c3\u30ad\u30fc",enableCookies:"Torus\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306b\u306f\u3001\u30d6\u30e9\u30a6\u30b6\u306e\u8a2d\u5b9a\u3067Cookie\u3092\u6709\u52b9\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002",clickHere:"\u8a73\u3057\u304f\u306f"}},ko:{embed:{continue:"\uacc4\uc18d\ud558\ub2e4",actionRequired:"\uc2b9\uc778 \ud544\uc694",pendingAction:"\ud31d\uc5c5\uc5d0\uc11c \uc694\uccad\uc744 \uc9c4\ud589\ud558\ub824\uba74 \uacc4\uc18d\uc744 \ud074\ub9ad\ud558\uc2ed\uc2dc\uc624.",cookiesRequired:"\ucfe0\ud0a4 \ud544\uc694",enableCookies:"\ube0c\ub77c\uc6b0\uc800 \ud658\uacbd \uc124\uc815\uc5d0\uc11c \ucfe0\ud0a4\ub97c \ud65c\uc131\ud654\ud558\uc5ec Torus\uc5d0 \uc561\uc138\uc2a4\ud558\uc2ed\uc2dc\uc624.",clickHere:"\ub354 \ub9ce\uc740 \uc815\ubcf4"}},zh:{embed:{continue:"\u7ee7\u7eed",actionRequired:"\u9700\u8981\u6388\u6743",pendingAction:"\u5355\u51fb\u7ee7\u7eed\u4ee5\u5728\u5f39\u51fa\u7a97\u53e3\u4e2d\u7ee7\u7eed\u60a8\u7684\u8bf7\u6c42",cookiesRequired:"\u5fc5\u586bCookie",enableCookies:"\u8bf7\u5728\u60a8\u7684\u6d4f\u89c8\u5668\u9996\u9009\u9879\u4e2d\u542f\u7528cookie\u4ee5\u8bbf\u95eeTorus\u3002",clickHere:"\u66f4\u591a\u4fe1\u606f"}}};var ge={supportedVerifierList:[ce.GOOGLE,ce.REDDIT,ce.DISCORD],paymentProviders:pe,api:"https://api.tor.us",translations:me,prodTorusUrl:"",localStorageKey:"torus-".concat(window.location.hostname)};const ye=e=>new Promise(((t,r)=>{null!=window.document.body?Promise.resolve(e()).then(t).catch(r):window.document.addEventListener("DOMContentLoaded",(()=>{Promise.resolve(e()).then(t).catch(r)}))})),ve=e=>{const t=window.document.createElement("template"),r=e.trim();return t.innerHTML=r,t.content.firstChild},be=function(e,t,r){for(var n=arguments.length,i=new Array(n>3?n-3:0),o=3;o<n;o++)i[o-3]=arguments[o];const s=()=>{r(...i),e.removeEventListener(t,s)};e.addEventListener(t,s)},we=(e,t,r)=>{const n=i=>{r(i),e.removeListener(t,n)};e.on(t,n)};async function _e(){return new Promise((e=>{"loading"!==document.readyState?e():be(document,"DOMContentLoaded",e)}))}var Me=se.a.getLogger("torus-embed"),Se={errors:{disconnected:()=>"Torus: Lost connection to Torus.",permanentlyDisconnected:()=>"Torus: Disconnected from iframe. Page reload required.",sendSiteMetadata:()=>"Torus: Failed to send site metadata. This is an internal error, please report this bug.",unsupportedSync:e=>"Torus: The Torus Ethereum provider does not support synchronous methods like ".concat(e," without a callback parameter."),invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidOptions:(e,t)=>"Invalid options. Received: { maxEventListeners: ".concat(e,", shouldSendMetadata: ").concat(t," }"),invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:e=>"'args.logger' must include required method '".concat(e,"'.")},info:{connected:e=>'Torus: Connected to chain with ID "'.concat(e,'".')},warnings:{enableDeprecation:'Torus: ""ethereum.enable()" is deprecated and may be removed in the future. Please use "ethereum.send("eth_requestAccounts")" instead. For more information, see: https://eips.ethereum.org/EIPS/eip-1102',sendDeprecation:'Torus: "ethereum.send(...)" is deprecated and may be removed in the future. Please use "ethereum.sendAsync(...)" or "ethereum.request(...)" instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193',events:{close:'Torus: The event "close" is deprecated and may be removed in the future. Please use "disconnect" instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193',data:'Torus: The event "data" is deprecated and will be removed in the future.Use "message" instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#message',networkChanged:'Torus: The event "networkChanged" is deprecated and may be removed in the future. Please use "chainChanged" instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193',notification:'Torus: The event "notification" is deprecated and may be removed in the future. Please use "message" instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193'},publicConfigStore:'Torus: The property "publicConfigStore" is deprecated and WILL be removed in the future.'}};const{paymentProviders:Oe}=ge,ke=(e,t)=>{const r={};if(!e)return{errors:r,isValid:!0};if(e&&!Oe[e])return r.provider="Invalid Provider",{errors:r,isValid:0===Object.keys(r).length};const n=Oe[e],i=t||{};if(i.fiatValue){const e=+parseFloat(i.fiatValue.toString())||0;e<n.minOrderValue&&(r.fiatValue="Requested amount is lower than supported"),e>n.maxOrderValue&&n.enforceMax&&(r.fiatValue="Requested amount is higher than supported")}return i.selectedCurrency&&!n.validCurrencies.includes(i.selectedCurrency)&&(r.selectedCurrency="Unsupported currency"),i.selectedCryptoCurrency&&!n.validCryptoCurrencies.includes(i.selectedCryptoCurrency)&&(r.selectedCryptoCurrency="Unsupported cryptoCurrency"),{errors:r,isValid:0===Object.keys(r).length}};function Ee(){return(e,t,r)=>{"string"===typeof e.method&&e.method||(t.error=$["ethErrors"].rpc.invalidRequest({message:"The request 'method' must be a non-empty string.",data:e})),r((e=>{const{error:r}=t;return r?(Me.error("MetaMask - RPC Error: ".concat(r.message),r),e()):e()}))}}function xe(e,t,r){let n='MetaMask: Lost connection to "'.concat(e,'".');null!==t&&void 0!==t&&t.stack&&(n+="\n".concat(t.stack)),Me.warn(n),r&&r.listenerCount("error")>0&&r.emit("error",n)}const Pe=()=>Math.random().toString(36).slice(2),je=async(e,t)=>{let r,n;const i="1.20.2";let o=t.version||i;try{if(("binance"===e||"production"===e)&&!t.version){let e;e=ge.prodTorusUrl?{data:ge.prodTorusUrl}:await Object(p["b"])("".concat(ge.api,"/latestversion?name=@toruslabs/torus-embed&version=").concat(i),{},{useAPIKey:!0}),o=e.data,ge.prodTorusUrl=e.data}}catch(s){Me.error(s,"unable to fetch latest version")}switch(Me.info("version used: ",o),e){case"binance":r="https://binance.tor.us/v".concat(o),n="info";break;case"testing":r="https://testing.tor.us",n="debug";break;case"lrc":r="https://lrc.tor.us",n="debug";break;case"beta":r="https://beta.tor.us",n="debug";break;case"development":r="http://localhost:4050",n="debug";break;default:r="https://app.tor.us/v".concat(o),n="error";break}return{torusUrl:r,logLevel:n}},Re=()=>{let e=window.navigator.language||"en-US";const t=e.split("-");return e=Object.prototype.hasOwnProperty.call(ge.translations,t[0])?t[0]:"en",e},Ae=["eth_subscription"],Ce=()=>{},Te="directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=660,width=375",Ie="directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=740,width=1315",Le="directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=700,width=450";function De(e){let t;try{t=window[e];const r="__storage_test__";return t.setItem(r,r),t.removeItem(r),!0}catch(r){return r&&(22===r.code||1014===r.code||"QuotaExceededError"===r.name||"NS_ERROR_DOM_QUOTA_REACHED"===r.name)&&t&&0!==t.length}}function Ne(){const e=void 0!==window.screenLeft?window.screenLeft:window.screenX,t=void 0!==window.screenTop?window.screenTop:window.screenY,r=1200,n=700,i=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,o=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,s=1,a=Math.abs((i-r)/2/s+e),u=Math.abs((o-n)/2/s+t),c="titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=".concat(n/s,",width=").concat(r/s,",top=").concat(u,",left=").concat(a);return c}function Ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}T.defaultMaxListeners=100;const qe=function(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(n,i)=>n||i.error?t(n||i.error):!r||Array.isArray(i)?e(i):e(i.result)};class Fe extends T{constructor(e){let{maxEventListeners:t=100,shouldSendMetadata:r=!0,jsonRpcStreamName:n="provider"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(super(),s()(this,"chainId",void 0),s()(this,"selectedAddress",void 0),s()(this,"_rpcEngine",void 0),s()(this,"networkVersion",void 0),s()(this,"shouldSendMetadata",void 0),s()(this,"isTorus",void 0),s()(this,"_publicConfigStore",void 0),s()(this,"tryPreopenHandle",void 0),s()(this,"enable",void 0),s()(this,"_state",void 0),s()(this,"_jsonRpcConnection",void 0),s()(this,"_sentWarnings",{enable:!1,experimentalMethods:!1,send:!1,publicConfigStore:!1,events:{close:!1,data:!1,networkChanged:!1,notification:!1}}),!ie(e))throw new Error(Se.errors.invalidDuplexStream());this.isTorus=!0,this.setMaxListeners(t),this._state=Be({},Fe._defaultState),this.selectedAddress=null,this.networkVersion=null,this.chainId=null,this.shouldSendMetadata=r,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this._handleConnect=this._handleConnect.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this),this._sendSync=this._sendSync.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this._warnOfDeprecation=this._warnOfDeprecation.bind(this),this._initializeState=this._initializeState.bind(this),this.request=this.request.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this);const i=new K;k()(e,i,e,this._handleStreamDisconnect.bind(this,"MetaMask")),this._publicConfigStore=new Z["ObservableStore"]({storageKey:"Metamask-Config"}),k()(i.createStream("publicConfig"),Object(Z["storeAsStream"])(this._publicConfigStore),xe.bind(this,"MetaMask PublicConfigStore")),i.ignoreStream("phishing"),this.on("connect",(()=>{this._state.isConnected=!0}));const o=D();k()(o.stream,i.createStream(n),o.stream,this._handleStreamDisconnect.bind(this,"MetaMask RpcProvider"));const a=new q;a.push(N()),a.push(Ee()),a.push(o.middleware),this._rpcEngine=a,o.events.on("notification",(e=>{const{method:t,params:r}=e;"wallet_accountsChanged"===t?this._handleAccountsChanged(r):"wallet_unlockStateChanged"===t?this._handleUnlockStateChanged(r):"wallet_chainChanged"===t?this._handleChainChanged(r):Ae.includes(e.method)&&(this.emit("data",e),this.emit("notification",r.result),this.emit("message",{type:t,data:r}))}))}get publicConfigStore(){return this._sentWarnings.publicConfigStore||(Me.warn(Se.warnings.publicConfigStore),this._sentWarnings.publicConfigStore=!0),this._publicConfigStore}isConnected(){return this._state.isConnected}async request(e){if(!e||"object"!==typeof e||Array.isArray(e))throw $["ethErrors"].rpc.invalidRequest({message:Se.errors.invalidRequestArgs(),data:e});const{method:t,params:r}=e;if("string"!==typeof t||0===t.length)throw $["ethErrors"].rpc.invalidRequest({message:Se.errors.invalidRequestMethod(),data:e});if(void 0!==r&&!Array.isArray(r)&&("object"!==typeof r||null===r))throw $["ethErrors"].rpc.invalidRequest({message:Se.errors.invalidRequestParams(),data:e});return new Promise(((e,n)=>{this._rpcRequest({method:t,params:r},qe(e,n))}))}sendAsync(e,t){this._rpcRequest(e,t)}addListener(e,t){return this._warnOfDeprecation(e),super.addListener(e,t)}on(e,t){return this._warnOfDeprecation(e),super.on(e,t)}once(e,t){return this._warnOfDeprecation(e),super.once(e,t)}prependListener(e,t){return this._warnOfDeprecation(e),super.prependListener(e,t)}prependOnceListener(e,t){return this._warnOfDeprecation(e),super.prependOnceListener(e,t)}async _initializeState(){try{const{accounts:e,chainId:t,isUnlocked:r,networkVersion:n}=await this.request({method:"wallet_getProviderState"});this.emit("connect",{chainId:t}),this._handleChainChanged({chainId:t,networkVersion:n}),this._handleUnlockStateChanged({accounts:e,isUnlocked:r}),this._handleAccountsChanged(e)}catch(e){Me.error("MetaMask: Failed to get initial state. Please report this bug.",e)}finally{Me.info("initialized state"),this._state.initialized=!0,this.emit("_initialized")}}_rpcRequest(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t;const i=e;if(!Array.isArray(i))if(i.jsonrpc||(i.jsonrpc="2.0"),"eth_accounts"===i.method||"eth_requestAccounts"===i.method)n=(e,n)=>{this._handleAccountsChanged(n.result||[],"eth_accounts"===i.method,r),t(e,n)};else if("wallet_getProviderState"===i.method)return void this._rpcEngine.handle(e,n);this.tryPreopenHandle(i,n)}send(e,t){return this._sentWarnings.send||(Me.warn(Se.warnings.sendDeprecation),this._sentWarnings.send=!0),"string"!==typeof e||t&&!Array.isArray(t)?e&&"object"===typeof e&&"function"===typeof t?this._rpcRequest(e,t):this._sendSync(e):new Promise(((r,n)=>{try{this._rpcRequest({method:e,params:t},qe(r,n,!1))}catch(i){n(i)}}))}_sendSync(e){let t;switch(e.method){case"eth_accounts":t=this.selectedAddress?[this.selectedAddress]:[];break;case"eth_coinbase":t=this.selectedAddress||null;break;case"eth_uninstallFilter":this._rpcRequest(e,Ce),t=!0;break;case"net_version":t=this.networkVersion||null;break;default:throw new Error(Se.errors.unsupportedSync(e.method))}return{id:e.id,jsonrpc:e.jsonrpc,result:t}}_handleConnect(e){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:e}),Me.debug(Se.info.connected(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){let r;this._state.isConnected=!1,e?(r=new $["EthereumRpcError"](1013,t||Se.errors.disconnected()),Me.debug(r)):(r=new $["EthereumRpcError"](1011,t||Se.errors.permanentlyDisconnected()),Me.error(r),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleStreamDisconnect(e,t){xe(e,t,this),this._handleDisconnect(!1,t?t.message:void 0)}_handleAccountsChanged(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e;Array.isArray(n)||(Me.error("MetaMask: Received non-array accounts parameter. Please report this bug.",n),n=[]);for(const i of e)if("string"!==typeof i){Me.error("MetaMask: Received non-string account. Please report this bug.",e),n=[];break}ee()(this._state.accounts,n)||(t&&Array.isArray(this._state.accounts)&&this._state.accounts.length>0&&!r&&Me.error('MetaMask: "eth_accounts" unexpectedly updated accounts. Please report this bug.',n),this._state.accounts=n,this.emit("accountsChanged",n)),this.selectedAddress!==n[0]&&(this.selectedAddress=n[0]||null)}_handleChainChanged(){let{chainId:e,networkVersion:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e&&t?"loading"===t?this._handleDisconnect(!0):(this._handleConnect(e),e!==this.chainId&&(this.chainId=e,this._state.initialized&&this.emit("chainChanged",this.chainId))):Me.error("MetaMask: Received invalid network parameters. Please report this bug.",{chainId:e,networkVersion:t})}_handleUnlockStateChanged(){let{accounts:e,isUnlocked:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"boolean"===typeof t?t!==this._state.isUnlocked&&(this._state.isUnlocked=t,this._handleAccountsChanged(e||[])):Me.error("MetaMask: Received invalid isUnlocked parameter. Please report this bug.",{isUnlocked:t})}_warnOfDeprecation(e){!1===this._sentWarnings.events[e]&&(Me.warn(Se.warnings.events[e]),this._sentWarnings.events[e]=!0)}}s()(Fe,"_defaultState",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});const We=e=>({algorithms:e.algorithms||["sha256"],delimiter:e.delimiter||" ",full:e.full||!1}),He=(e,t)=>{const r={};return e.algorithms.forEach((e=>{r[e]=ue()(e).update(t,"utf8").digest("base64")})),r},Ve=(e,t)=>{let r="";return r+=Object.keys(t.hashes).map((e=>"".concat(e,"-").concat(t.hashes[e]))).join(e.delimiter),r},Ke=(e,t)=>{const r=We(e),n={hashes:He(r,t),integrity:void 0};return n.integrity=Ve(r,n),r.full?n:n.integrity};class ze extends y["EventEmitter"]{constructor(e){let{url:t,target:r,features:n}=e;super(),s()(this,"url",void 0),s()(this,"target",void 0),s()(this,"features",void 0),s()(this,"window",void 0),s()(this,"windowTimer",void 0),s()(this,"iClosedWindow",void 0),this.url=t,this.target=r||"_blank",this.features=n||Ne(),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval((()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0),void 0===this.window&&clearInterval(this.windowTimer)}),500))}open(){var e;return this.window=window.open(this.url.href,this.target,this.features),null!==(e=this.window)&&void 0!==e&&e.focus&&this.window.focus(),Promise.resolve()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(e){e?window.location.replace(this.url.href):window.location.href=this.url.href}}function Je(e){return new Promise(((t,r)=>{try{const r=document.createElement("img");r.onload=()=>t(!0),r.onerror=()=>t(!1),r.src=e}catch(n){r(n)}}))}const Ge=e=>{const{document:t}=e,r=t.querySelector('head > meta[property="og:site_name"]');if(r)return r.content;const n=t.querySelector('head > meta[name="title"]');return n?n.content:t.title&&t.title.length>0?t.title:e.location.hostname};async function Xe(e){const{document:t}=e;let r=t.querySelector('head > link[rel="shortcut icon"]');return r&&await Je(r.href)?r.href:(r=Array.from(t.querySelectorAll('head > link[rel="icon"]')).find((e=>Boolean(e.href))),r&&await Je(r.href)?r.href:null)}const Ye=async()=>({name:Ge(window),icon:await Xe(window)});async function Ze(e){try{const t=await Ye();e.handle({jsonrpc:"2.0",id:Pe(),method:"wallet_sendDomainMetadata",params:t},Ce)}catch(t){Me.error({message:Se.errors.sendSiteMetadata(),originalError:t})}}const $e=["host","chainId","networkName"];function Qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const tt={[ce.GOOGLE]:!0,[ce.FACEBOOK]:!0,[ce.REDDIT]:!0,[ce.TWITCH]:!0,[ce.DISCORD]:!0},rt="sha384-zML+Us0eHuOwF3fLkTwt8MUpAwXOl0TVe5oe454wPUfqPcu5Xqip20eaFDr1fLj3",nt="max-age=3600",it=["eth_sendTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","personal_sign","eth_getEncryptionPublicKey","eth_decrypt"],ot=De("localStorage");(async function(){try{if("undefined"===typeof document)return;const e=document.createElement("link"),{torusUrl:t}=await je("production",{check:!1,hash:rt,version:""});e.href="".concat(t,"/popup"),e.crossOrigin="anonymous",e.type="text/html",e.rel="prefetch",e.relList&&e.relList.supports&&e.relList.supports("prefetch")&&document.head.appendChild(e)}catch(e){Me.warn(e)}})();class st{constructor(){let{buttonPosition:e=fe.BOTTOM_LEFT,modalZIndex:t=99999,apiKey:r="torus-default"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s()(this,"buttonPosition",fe.BOTTOM_LEFT),s()(this,"torusUrl",void 0),s()(this,"torusIframe",void 0),s()(this,"styleLink",void 0),s()(this,"isLoggedIn",void 0),s()(this,"isInitialized",void 0),s()(this,"torusWidgetVisibility",void 0),s()(this,"torusAlert",void 0),s()(this,"nodeDetailManager",void 0),s()(this,"torusJs",void 0),s()(this,"apiKey",void 0),s()(this,"modalZIndex",void 0),s()(this,"alertZIndex",void 0),s()(this,"torusAlertContainer",void 0),s()(this,"isIframeFullScreen",void 0),s()(this,"whiteLabel",void 0),s()(this,"requestedVerifier",void 0),s()(this,"currentVerifier",void 0),s()(this,"embedTranslations",void 0),s()(this,"ethereum",void 0),s()(this,"provider",void 0),s()(this,"communicationMux",void 0),s()(this,"isLoginCallback",void 0),s()(this,"dappStorageKey",void 0),s()(this,"paymentProviders",ge.paymentProviders),s()(this,"loginHint",""),this.buttonPosition=e,this.torusUrl="",this.isLoggedIn=!1,this.isInitialized=!1,this.torusWidgetVisibility=!0,this.requestedVerifier="",this.currentVerifier="",this.nodeDetailManager=new f,this.torusJs=new G["a"]({metadataHost:"https://metadata.tor.us",allowHost:"https://signer.tor.us/api/allow"}),this.apiKey=r,G["a"].setAPIKey(r),Object(p["d"])(r),this.modalZIndex=t,this.alertZIndex=t+1e3,this.isIframeFullScreen=!1,this.dappStorageKey=""}async init(){let{buildEnv:e=de.PRODUCTION,enableLogging:t=!1,enabledVerifiers:r=tt,network:n={host:"mainnet",chainId:null,networkName:"",blockExplorer:"",ticker:"",tickerName:""},loginConfig:i={},showTorusButton:o=!0,integrity:s={check:!1,hash:rt,version:""},whiteLabel:a,skipTKey:u=!1,useLocalStorage:c=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.isInitialized)throw new Error("Already initialized");const{torusUrl:l,logLevel:h}=await je(e,s);Me.info(l,"url loaded"),this.torusUrl=l,this.whiteLabel=a,Me.setDefaultLevel(h),t?Me.enableAll():Me.disableAll(),this.torusWidgetVisibility=o;let d="";if(ot&&c){const e=window.localStorage.getItem(ge.localStorageKey);if(e)d=e;else{const e="torus-app-".concat(Pe());window.localStorage.setItem(ge.localStorageKey,e),d=e}}this.dappStorageKey=d;const f=new URL(l);f.pathname.endsWith("/")?f.pathname+="popup":f.pathname+="/popup",d&&(f.hash="#dappStorageKey=".concat(d)),this.torusIframe=ve('<iframe\n        id="torusIframe"\n        class="torusIframe"\n        src="'.concat(f.href,'"\n        style="display: none; position: fixed; top: 0; right: 0; width: 100%;\n        height: 100%; border: none; border-radius: 0; z-index: ').concat(this.modalZIndex,'"\n      ></iframe>')),this.torusAlertContainer=ve('<div id="torusAlertContainer"></div>'),this.torusAlertContainer.style.display="none",this.torusAlertContainer.style.setProperty("z-index",this.alertZIndex.toString());const p=window.document.createElement("link");p.setAttribute("rel","stylesheet"),p.setAttribute("type","text/css"),p.setAttribute("href","".concat(l,"/css/widget.css")),this.styleLink=p;const{defaultLanguage:m=Re(),customTranslations:g={}}=this.whiteLabel||{},y=Y()(ge.translations,g),v=y[m]||ge.translations[Re()];this.embedTranslations=v.embed;const b=async()=>(await _e(),new Promise(((e,t)=>{this.torusIframe.onload=async()=>{this._setupWeb3();const o=this.communicationMux.getStream("init_stream");o.on("data",(r=>{const{name:n,data:i,error:o}=r;"init_complete"===n&&i.success?(this.isInitialized=!0,this._displayIframe(this.isIframeFullScreen),e(void 0)):o&&t(new Error(o))})),o.write({name:"init_stream",data:{enabledVerifiers:r,loginConfig:i,whiteLabel:this.whiteLabel,buttonPosition:this.buttonPosition,torusWidgetVisibility:this.torusWidgetVisibility,apiKey:this.apiKey,skipTKey:u,network:n}})},window.document.head.appendChild(this.styleLink),window.document.body.appendChild(this.torusIframe),window.document.body.appendChild(this.torusAlertContainer)})));if("production"===e&&s.check){const e="".concat(l,"/popup"),t=await fetch(e,{cache:"reload"});if(t.headers.get("Cache-Control")!==nt)throw new Error("Unexpected Cache-Control headers, got ".concat(t.headers.get("Cache-Control")));const r=await t.text(),n=Ke({algorithms:["sha384"]},r);if(Me.info(n,"integrity"),n!==s.hash)throw this.clearInit(),new Error("Integrity check failed");await b()}else await b()}login(){let{verifier:e="",login_hint:t=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isInitialized)throw new Error("Call init() first");return this.requestedVerifier=e,this.loginHint=t,this.ethereum.enable()}logout(){return new Promise(((e,t)=>{if(!this.isLoggedIn)return void t(new Error("User has not logged in yet"));const r=this.communicationMux.getStream("logout");r.write({name:"logOut"});const n=this.communicationMux.getStream("status"),i=r=>{r.loggedIn?t(new Error("Some Error Occured")):(this.isLoggedIn=!1,this.currentVerifier="",this.requestedVerifier="",e())};we(n,"data",i)}))}async cleanUp(){this.isLoggedIn&&await this.logout(),this.clearInit()}clearInit(){function e(e){return e instanceof Element||e instanceof HTMLDocument}e(this.styleLink)&&window.document.body.contains(this.styleLink)&&(this.styleLink.remove(),this.styleLink=void 0),e(this.torusIframe)&&window.document.body.contains(this.torusIframe)&&(this.torusIframe.remove(),this.torusIframe=void 0),e(this.torusAlertContainer)&&window.document.body.contains(this.torusAlertContainer)&&(this.torusAlert=void 0,this.torusAlertContainer.remove(),this.torusAlertContainer=void 0),this.isInitialized=!1}hideTorusButton(){this.torusWidgetVisibility=!1,this._sendWidgetVisibilityStatus(!1),this._displayIframe()}showTorusButton(){this.torusWidgetVisibility=!0,this._sendWidgetVisibilityStatus(!0),this._displayIframe()}setProvider(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{host:t="mainnet",chainId:r=null,networkName:n=""}=e,o=i()(e,$e);return new Promise(((e,i)=>{const s=this.communicationMux.getStream("provider_change"),a=t=>{const{err:r,success:n}=t.data;Me.info(t),r?i(r):n?e():i(new Error("some error occured"))};we(s,"data",a);const u=Pe();this._handleWindow(u,{target:"_blank",features:Te}),s.write({name:"show_provider_change",data:{network:et({host:t,chainId:r,networkName:n},o),preopenInstanceId:u,override:!1}})}))}showWallet(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=this.communicationMux.getStream("show_wallet"),n=e?"/".concat(e):"";r.write({name:"show_wallet",data:{path:n}});const i=e=>{if("show_wallet_instance"===e.name){const{instanceId:r}=e.data,i=new URL("".concat(this.torusUrl,"/wallet").concat(n));i.searchParams.append("integrity","true"),i.searchParams.append("instanceId",r),Object.keys(t).forEach((e=>{i.searchParams.append(e,t[e])})),this.dappStorageKey&&(i.hash="#dappStorageKey=".concat(this.dappStorageKey));const o=new ze({url:i,features:Ie});o.open()}};we(r,"data",i)}async getPublicAddress(e){let{verifier:t,verifierId:r,isExtended:n=!1}=e;if(!ge.supportedVerifierList.includes(t)||!le[t])throw new Error("Unsupported verifier");const i=await this.nodeDetailManager.getNodeDetails(!1,!0),o=i.torusNodeEndpoints,s=i.torusNodePub,a=t,u=le[t];try{const e=await this.torusJs.getUserTypeAndAddress(o,s,{verifier:a,verifierId:r});if("v1"===e.typeOfUser)return n?e:e.address;const t=await this.torusJs.getUserTypeAndAddress(o,s,{verifier:u,verifierId:r},!0);return n?t:t.address}catch(c){if(null!==c&&void 0!==c&&c.message.includes("Verifier + VerifierID has not yet been assigned")){const e=await this.torusJs.getUserTypeAndAddress(o,s,{verifier:u,verifierId:r},!0);return n?e:e.address}throw c}}getUserInfo(e){return new Promise(((t,r)=>{if(this.isLoggedIn){const n=this.communicationMux.getStream("user_info_access");n.write({name:"user_info_access_request"});const i=n=>{const{name:i,data:{approved:o,payload:s,rejected:a,newRequest:u}}=n;if("user_info_access_response"===i)if(o)t(s);else if(a)r(new Error("User rejected the request"));else if(u){const n=this.communicationMux.getStream("user_info"),i=e=>{"user_info_response"===e.name&&(e.data.approved?t(e.data.payload):r(new Error("User rejected the request")))};we(n,"data",i);const o=Pe();this._handleWindow(o,{target:"_blank",features:Te}),n.write({name:"user_info_request",data:{message:e,preopenInstanceId:o}})}};we(n,"data",i)}else r(new Error("User has not logged in yet"))}))}initiateTopup(e,t){return new Promise(((r,n)=>{if(this.isInitialized){const{errors:i,isValid:o}=ke(e,t);if(!o)return void n(new Error(JSON.stringify(i)));const s=this.communicationMux.getStream("topup"),a=e=>{"topup_response"===e.name&&(e.data.success?r(e.data.success):n(new Error(e.data.error)))};we(s,"data",a);const u=Pe();this._handleWindow(u),s.write({name:"topup_request",data:{provider:e,params:t,preopenInstanceId:u}})}else n(new Error("Torus is not initialized yet"))}))}_handleWindow(e){let{url:t,target:r,features:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){const i=this.communicationMux.getStream("window"),o=new URL(t||"".concat(this.torusUrl,"/redirect?preopenInstanceId=").concat(e));this.dappStorageKey&&(o.hash?o.hash+="&dappStorageKey=".concat(this.dappStorageKey):o.hash="#dappStorageKey=".concat(this.dappStorageKey));const s=new ze({url:o,target:r,features:n});if(s.open(),!s.window)return void this._createPopupBlockAlert(e,o.href);i.write({name:"opened_window",data:{preopenInstanceId:e}});const a=t=>{let{preopenInstanceId:r,close:n}=t;r===e&&n&&(s.close(),i.removeListener("data",a))};i.on("data",a),s.once("close",(()=>{i.write({data:{preopenInstanceId:e,closed:!0}}),i.removeListener("data",a)}))}}_setEmbedWhiteLabel(e){const{theme:t}=this.whiteLabel||{};if(t){const{isDark:r=!1,colors:n={}}=t;r&&e.classList.add("torus-dark"),n.torusBrand1&&e.style.setProperty("--torus-brand-1",n.torusBrand1),n.torusGray2&&e.style.setProperty("--torus-gray-2",n.torusGray2)}}_getLogoUrl(){var e,t;let r="".concat(this.torusUrl,"/images/torus_icon-blue.svg");var n,i;null!==(e=this.whiteLabel)&&void 0!==e&&null!==(t=e.theme)&&void 0!==t&&t.isDark?r=(null===(n=this.whiteLabel)||void 0===n?void 0:n.logoLight)||r:r=(null===(i=this.whiteLabel)||void 0===i?void 0:i.logoDark)||r;return r}_sendWidgetVisibilityStatus(e){const t=this.communicationMux.getStream("torus-widget-visibility");t.write({data:e})}_displayIframe(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t={};if(e)t.display="block",t.width="100%",t.height="100%",t.top="0px",t.right="0px",t.left="0px",t.bottom="0px";else switch(t.display=this.torusWidgetVisibility?"block":"none",t.height="70px",t.width="70px",this.buttonPosition){case fe.TOP_LEFT:t.top="0px",t.left="0px",t.right="auto",t.bottom="auto";break;case fe.TOP_RIGHT:t.top="0px",t.right="0px",t.left="auto",t.bottom="auto";break;case fe.BOTTOM_RIGHT:t.bottom="0px",t.right="0px",t.top="auto",t.left="auto";break;case fe.BOTTOM_LEFT:default:t.bottom="0px",t.left="0px",t.top="auto",t.right="auto";break}Object.assign(this.torusIframe.style,t),this.isIframeFullScreen=e}_setupWeb3(){Me.info("setupWeb3 running");const e=new R({name:"embed_metamask",target:"iframe_metamask",targetWindow:this.torusIframe.contentWindow,targetOrigin:new URL(this.torusUrl).origin}),t=new R({name:"embed_comm",target:"iframe_comm",targetWindow:this.torusIframe.contentWindow,targetOrigin:new URL(this.torusUrl).origin}),r=new Fe(e),n=e=>{const t=r[e];r[e]=function(e){if(e&&"eth_requestAccounts"===e)return r.enable();for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return t.apply(this,[e,...i])}};n("send"),n("sendAsync"),r.enable=()=>new Promise(((e,t)=>{r.sendAsync({jsonrpc:"2.0",id:Pe(),method:"eth_requestAccounts",params:[]},((r,n)=>{const{result:i}=n||{};if(r)setTimeout((()=>{t(r)}),50);else if(Array.isArray(i)&&i.length>0){const r=()=>{if(""!==this.requestedVerifier&&this.currentVerifier!==this.requestedVerifier){const{requestedVerifier:r}=this;this.logout().then((n=>{this.requestedVerifier=r,this._showLoginPopup(!0,e,t)})).catch((e=>t(e)))}else e(i)};this.isLoggedIn?r():this.isLoginCallback=r}else this._showLoginPopup(!0,e,t)}))})),r.tryPreopenHandle=(e,t)=>{const n=e;if(!Array.isArray(n)&&it.includes(n.method)){const e=Pe();this._handleWindow(e,{target:"_blank",features:Le}),n.preopenInstanceId=e}r._rpcEngine.handle(n,t)};const i=new Proxy(r,{deleteProperty:()=>!0});this.ethereum=i;const o=J(t);this.communicationMux=o;const s=o.getStream("window");s.on("data",(e=>{"create_window"===e.name&&this._createPopupBlockAlert(e.data.preopenInstanceId,e.data.url)}));const a=o.getStream("widget");a.on("data",(e=>{const{data:t}=e;this._displayIframe(t)}));const u=o.getStream("status");u.on("data",(e=>{e.loggedIn?(this.isLoggedIn=e.loggedIn,this.currentVerifier=e.verifier):this._displayIframe(),this.isLoginCallback&&(this.isLoginCallback(),delete this.isLoginCallback)})),this.provider=i,this.provider.shouldSendMetadata&&Ze(this.provider._rpcEngine),r._initializeState(),Me.debug("Torus - injected provider")}_showLoginPopup(e,t,r){const n=e=>{const{err:n,selectedAddress:i}=e;n?(Me.error(n),r&&r(n)):t&&t([i]),this.isIframeFullScreen&&this._displayIframe()},i=this.communicationMux.getStream("oauth");if(this.requestedVerifier){we(i,"data",n);const t=Pe();this._handleWindow(t),i.write({name:"oauth",data:{calledFromEmbed:e,verifier:this.requestedVerifier,preopenInstanceId:t,login_hint:this.loginHint}})}else this._displayIframe(!0),we(i,"data",n),i.write({name:"oauth_modal",data:{calledFromEmbed:e}})}_createPopupBlockAlert(e,t){const r=this._getLogoUrl(),n=ve('<div id="torusAlert" class="torus-alert--v2">'+'<div id="torusAlert__logo"><img src="'.concat(r,'" /></div>')+"<div>"+'<h1 id="torusAlert__title">'.concat(this.embedTranslations.actionRequired,"</h1>")+'<p id="torusAlert__desc">'.concat(this.embedTranslations.pendingAction,"</p>")+"</div></div>"),i=ve('<div><a id="torusAlert__btn">'.concat(this.embedTranslations.continue,"</a></div>")),o=ve('<div id="torusAlert__btn-container"></div>');o.appendChild(i),n.appendChild(o);const s=()=>{i.addEventListener("click",(()=>{this._handleWindow(e,{url:t,target:"_blank",features:Le}),n.remove(),0===this.torusAlertContainer.children.length&&(this.torusAlertContainer.style.display="none")}))};this._setEmbedWhiteLabel(n);const a=()=>{this.torusAlertContainer.style.display="block",this.torusAlertContainer.appendChild(n)};ye(a),ye(s)}}},mLEo:function(e,t,r){"use strict";(function(t){function r(e,r){var o=this,a=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return a||u?(r?r(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(s,this,e)):t.nextTick(s,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!r&&e?o._writableState?o._writableState.errorEmitted?t.nextTick(i,o):(o._writableState.errorEmitted=!0,t.nextTick(n,o,e)):t.nextTick(n,o,e):r?(t.nextTick(i,o),r(e)):t.nextTick(i,o)})),this)}function n(e,t){s(e,t),i(e)}function i(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function o(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function s(e,t){e.emit("error",t)}function a(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}e.exports={destroy:r,undestroy:o,errorOrDestroy:a}}).call(this,r("Q2Ig"))},oShl:function(e,t,r){var n=r("Nsbk"),i=r("SksO"),o=r("xfeJ"),s=r("sXyB");function a(t){var r="function"===typeof Map?new Map:void 0;return e.exports=a=function(e){if(null===e||!o(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return s(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},e.exports.__esModule=!0,e.exports["default"]=e.exports,a(t)}e.exports=a,e.exports.__esModule=!0,e.exports["default"]=e.exports},q1Jy:function(e,t,r){(function(t){var n=r("VmuJ"),i=function(){},o=function(e){return e.setHeader&&"function"===typeof e.abort},s=function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length},a=function(e,r,u){if("function"===typeof r)return a(e,null,r);r||(r={}),u=n(u||i);var c=e._writableState,l=e._readableState,h=r.readable||!1!==r.readable&&e.readable,d=r.writable||!1!==r.writable&&e.writable,f=!1,p=function(){e.writable||m()},m=function(){d=!1,h||u.call(e)},g=function(){h=!1,d||u.call(e)},y=function(t){u.call(e,t?new Error("exited with error code: "+t):null)},v=function(t){u.call(e,t)},b=function(){t.nextTick(w)},w=function(){if(!f)return(!h||l&&l.ended&&!l.destroyed)&&(!d||c&&c.ended&&!c.destroyed)?void 0:u.call(e,new Error("premature close"))},_=function(){e.req.on("finish",m)};return o(e)?(e.on("complete",m),e.on("abort",b),e.req?_():e.on("request",_)):d&&!c&&(e.on("end",p),e.on("close",p)),s(e)&&e.on("exit",y),e.on("end",g),e.on("finish",m),!1!==r.error&&e.on("error",v),e.on("close",b),function(){f=!0,e.removeListener("complete",m),e.removeListener("abort",b),e.removeListener("request",_),e.req&&e.req.removeListener("finish",m),e.removeListener("end",p),e.removeListener("close",p),e.removeListener("finish",m),e.removeListener("exit",y),e.removeListener("end",g),e.removeListener("error",v),e.removeListener("close",b)}};e.exports=a}).call(this,r("Q2Ig"))},"rE/H":function(e,t,r){var n="undefined"!==typeof JSON?JSON:r("dsut");e.exports=function(e,t){t||(t={}),"function"===typeof t&&(t={cmp:t});var r=t.space||"";"number"===typeof r&&(r=Array(r+1).join(" "));var s="boolean"===typeof t.cycles&&t.cycles,a=t.replacer||function(e,t){return t},u=t.cmp&&function(e){return function(t){return function(r,n){var i={key:r,value:t[r]},o={key:n,value:t[n]};return e(i,o)}}}(t.cmp),c=[];return function e(t,l,h,d){var f=r?"\n"+new Array(d+1).join(r):"",p=r?": ":":";if(h&&h.toJSON&&"function"===typeof h.toJSON&&(h=h.toJSON()),h=a.call(t,l,h),void 0!==h){if("object"!==typeof h||null===h)return n.stringify(h);if(i(h)){for(var m=[],g=0;g<h.length;g++){var y=e(h,g,h[g],d+1)||n.stringify(null);m.push(f+r+y)}return"["+m.join(",")+f+"]"}if(-1!==c.indexOf(h)){if(s)return n.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}c.push(h);var v=o(h).sort(u&&u(h));for(m=[],g=0;g<v.length;g++){l=v[g];var b=e(h,l,h[l],d+1);if(b){var w=n.stringify(l)+p+b;m.push(f+r+w)}}return c.splice(c.indexOf(h),1),"{"+m.join(",")+f+"}"}}({"":e},"",e,0)};var i=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},o=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},r=[];for(var n in e)t.call(e,n)&&r.push(n);return r}},rPsM:function(e,t){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},s4eT:function(e,t,r){t=e.exports=r("zcBp"),t.Stream=t,t.Readable=t,t.Writable=r("jYwt"),t.Duplex=r("CPG7"),t.Transform=r("4vUj"),t.PassThrough=r("4uu8"),t.finished=r("UpG2"),t.pipeline=r("7ZKb")},sXyB:function(e,t,r){var n=r("SksO"),i=r("b48C");function o(t,r,s){return i()?(e.exports=o=Reflect.construct,e.exports.__esModule=!0,e.exports["default"]=e.exports):(e.exports=o=function(e,t,r){var i=[null];i.push.apply(i,t);var o=Function.bind.apply(e,i),s=new o;return r&&n(s,r.prototype),s},e.exports.__esModule=!0,e.exports["default"]=e.exports),o.apply(null,arguments)}e.exports=o,e.exports.__esModule=!0,e.exports["default"]=e.exports},uIhD:function(e,t,r){"use strict";(function(e,n){var i=r("MzeL").ec,o=new i("secp256k1"),s=e.crypto||e.msCrypto||{},a=s.subtle||s.webkitSubtle,u=r("HEbw");const c=n.from("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141","hex"),l=n.alloc(32,0);function h(e,t){if(!e)throw new Error(t||"Assertion failed")}function d(e){return n.isBuffer(e)&&32===e.length}function f(e){return!!d(e)&&(e.compare(l)>0&&e.compare(c)<0)}function p(e,t){if(e.length!==t.length)return!1;for(var r=0,n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r}function m(e){var t=new Uint8Array(e);return"undefined"===typeof s.getRandomValues?n.from(u.randomBytes(e)):(s.getRandomValues(t),n.from(t))}function g(e){return new Promise((function(t){var r=u.createHash("sha512"),n=r.update(e).digest();t(new Uint8Array(n))}))}function y(e){return function(t,r,i){return new Promise((function(o){if(a){var s={name:"AES-CBC"},c=a.importKey("raw",r,s,!1,[e]);return c.then((function(r){var n={name:"AES-CBC",iv:t};return a[e](n,r,i)})).then((function(e){o(n.from(new Uint8Array(e)))}))}if("encrypt"===e){var l=u.createCipheriv("aes-256-cbc",r,t);let e=l.update(i),s=l.final();o(n.concat([e,s]))}else if("decrypt"===e){var h=u.createDecipheriv("aes-256-cbc",r,t);let e=h.update(i),s=h.final();o(n.concat([e,s]))}}))}}var v=y("encrypt"),b=y("decrypt");function w(e,t){return new Promise((function(r){var i=u.createHmac("sha256",n.from(e));i.update(t);var o=i.digest();r(o)}))}function _(e,t,r){return new Promise((function(i){var o=u.createHmac("sha256",n.from(e));o.update(t);var s=o.digest();i(p(s,r))}))}t.generatePrivate=function(){var e=m(32);while(!f(e))e=m(32);return e};var M=t.getPublic=function(e){return h(32===e.length,"Bad private key"),h(f(e),"Bad private key"),n.from(o.keyFromPrivate(e).getPublic("arr"))};t.getPublicCompressed=function(e){h(32===e.length,"Bad private key"),h(f(e),"Bad private key");let t=!0;return n.from(o.keyFromPrivate(e).getPublic(t,"arr"))};t.sign=function(e,t){return new Promise((function(r){h(32===e.length,"Bad private key"),h(f(e),"Bad private key"),h(t.length>0,"Message should not be empty"),h(t.length<=32,"Message is too long"),r(n.from(o.sign(t,e,{canonical:!0}).toDER()))}))},t.verify=function(e,t,r){return new Promise((function(n,i){h(65===e.length||33===e.length,"Bad public key"),65===e.length&&h(4===e[0],"Bad public key"),33===e.length&&h(2===e[0]||3===e[0],"Bad public key"),h(t.length>0,"Message should not be empty"),h(t.length<=32,"Message is too long"),o.verify(t,r,e)?n(null):i(new Error("Bad signature"))}))};var S=t.derive=function(e,t){return new Promise((function(r){h(n.isBuffer(e),"Bad private key"),h(n.isBuffer(t),"Bad public key"),h(32===e.length,"Bad private key"),h(f(e),"Bad private key"),h(65===t.length||33===t.length,"Bad public key"),65===t.length&&h(4===t[0],"Bad public key"),33===t.length&&h(2===t[0]||3===t[0],"Bad public key");var i=o.keyFromPrivate(e),s=o.keyFromPublic(t),a=i.derive(s.getPublic());r(n.from(a.toArray()))}))};t.encrypt=function(e,t,r){var i,o,s,a;return r=r||{},new Promise((function(t){var n=r.ephemPrivateKey||m(32);while(!f(n))n=r.ephemPrivateKey||m(32);o=M(n),t(S(n,e))})).then((function(e){return g(e)})).then((function(e){i=r.iv||m(16);var n=e.slice(0,32);return a=e.slice(32),v(i,n,t)})).then((function(e){s=e;var t=n.concat([i,o,s]);return w(a,t)})).then((function(e){return{iv:i,ephemPublicKey:o,ciphertext:s,mac:e}}))},t.decrypt=function(e,t){var r;return S(e,t.ephemPublicKey).then((function(e){return g(e)})).then((function(e){r=e.slice(0,32);var i=e.slice(32),o=n.concat([t.iv,t.ephemPublicKey,t.ciphertext]);return _(i,o,t.mac)})).then((function(e){return h(e,"Bad MAC"),b(t.iv,r,t.ciphertext)})).then((function(e){return n.from(new Uint8Array(e))}))}}).call(this,r("IyRk"),r("HDXh").Buffer)},uPSP:function(e,t){var r,n,i,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function a(e){return o.lastIndex=0,o.test(e)?'"'+e.replace(o,(function(e){var t=s[e];return"string"===typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function u(e,t){var o,s,c,l,h,d=r,f=t[e];switch(f&&"object"===typeof f&&"function"===typeof f.toJSON&&(f=f.toJSON(e)),"function"===typeof i&&(f=i.call(t,e,f)),typeof f){case"string":return a(f);case"number":return isFinite(f)?String(f):"null";case"boolean":case"null":return String(f);case"object":if(!f)return"null";if(r+=n,h=[],"[object Array]"===Object.prototype.toString.apply(f)){for(l=f.length,o=0;o<l;o+=1)h[o]=u(o,f)||"null";return c=0===h.length?"[]":r?"[\n"+r+h.join(",\n"+r)+"\n"+d+"]":"["+h.join(",")+"]",r=d,c}if(i&&"object"===typeof i)for(l=i.length,o=0;o<l;o+=1)s=i[o],"string"===typeof s&&(c=u(s,f),c&&h.push(a(s)+(r?": ":":")+c));else for(s in f)Object.prototype.hasOwnProperty.call(f,s)&&(c=u(s,f),c&&h.push(a(s)+(r?": ":":")+c));return c=0===h.length?"{}":r?"{\n"+r+h.join(",\n"+r)+"\n"+d+"}":"{"+h.join(",")+"}",r=d,c}}e.exports=function(e,t,o){var s;if(r="",n="","number"===typeof o)for(s=0;s<o;s+=1)n+=" ";else"string"===typeof o&&(n=o);if(i=t,t&&"function"!==typeof t&&("object"!==typeof t||"number"!==typeof t.length))throw new Error("JSON.stringify");return u("",{"":e})}},vUsp:function(e,t,r){"use strict";(function(e){function r(t){var r=4,n=t.length,i=n%r;if(!i)return t;var o=n,s=r-i,a=n+s,u=e.alloc(a);u.write(t);while(s--)u.write("=",o++);return u.toString()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r}).call(this,r("HDXh").Buffer)},xfeJ:function(e,t){function r(e){return-1!==Function.toString.call(e).indexOf("[native code]")}e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},xfhP:function(e,t,r){"use strict";function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var i={};function o(e,t,r){function o(e,r,n){return"string"===typeof t?t:t(e,r,n)}r||(r=Error);var s=function(e){function t(t,r,n){return e.call(this,o(t,r,n))||this}return n(t,e),t}(r);s.prototype.name=r.name,s.prototype.code=e,i[e]=s}function s(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}function a(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function u(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function c(e,t,r){return"number"!==typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}o("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),o("ERR_INVALID_ARG_TYPE",(function(e,t,r){var n,i;if("string"===typeof t&&a(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be",u(e," argument"))i="The ".concat(e," ").concat(n," ").concat(s(t,"type"));else{var o=c(e,".")?"property":"argument";i='The "'.concat(e,'" ').concat(o," ").concat(n," ").concat(s(t,"type"))}return i+=". Received type ".concat(typeof r),i}),TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=i},yXPU:function(e,t){function r(e,t,r,n,i,o,s){try{var a=e[o](s),u=a.value}catch(c){return void r(c)}a.done?t(u):Promise.resolve(u).then(n,i)}function n(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var s=e.apply(t,n);function a(e){r(s,i,o,a,u,"next",e)}function u(e){r(s,i,o,a,u,"throw",e)}a(void 0)}))}}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},zcBp:function(e,t,r){"use strict";(function(t,n){var i;e.exports=j,j.ReadableState=P;r("+qE3").EventEmitter;var o=function(e,t){return e.listeners(t).length},s=r("TCB8"),a=r("HDXh").Buffer,u=t.Uint8Array||function(){};function c(e){return a.from(e)}function l(e){return a.isBuffer(e)||e instanceof u}var h,d=r(21);h=d&&d.debuglog?d.debuglog("stream"):function(){};var f,p,m,g=r("OOKL"),y=r("mLEo"),v=r("K0MK"),b=v.getHighWaterMark,w=r("xfhP").codes,_=w.ERR_INVALID_ARG_TYPE,M=w.ERR_STREAM_PUSH_AFTER_EOF,S=w.ERR_METHOD_NOT_IMPLEMENTED,O=w.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r("P7XM")(j,s);var k=y.errorOrDestroy,E=["error","close","destroy","pause","resume"];function x(e,t,r){if("function"===typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function P(e,t,n){i=i||r("CPG7"),e=e||{},"boolean"!==typeof n&&(n=t instanceof i),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=b(this,e,"readableHighWaterMark",n),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(f||(f=r("qiJe").StringDecoder),this.decoder=new f(e.encoding),this.encoding=e.encoding)}function j(e){if(i=i||r("CPG7"),!(this instanceof j))return new j(e);var t=this instanceof i;this._readableState=new P(e,this,t),this.readable=!0,e&&("function"===typeof e.read&&(this._read=e.read),"function"===typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function R(e,t,r,n,i){h("readableAddChunk",t);var o,s=e._readableState;if(null===t)s.reading=!1,D(e,s);else if(i||(o=C(s,t)),o)k(e,o);else if(s.objectMode||t&&t.length>0)if("string"===typeof t||s.objectMode||Object.getPrototypeOf(t)===a.prototype||(t=c(t)),n)s.endEmitted?k(e,new O):A(e,s,t,!0);else if(s.ended)k(e,new M);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?A(e,s,t,!1):B(e,s)):A(e,s,t,!1)}else n||(s.reading=!1,B(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function A(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&N(e)),B(e,t)}function C(e,t){var r;return l(t)||"string"===typeof t||void 0===t||e.objectMode||(r=new _("chunk",["string","Buffer","Uint8Array"],t)),r}Object.defineProperty(j.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),j.prototype.destroy=y.destroy,j.prototype._undestroy=y.undestroy,j.prototype._destroy=function(e,t){t(e)},j.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"===typeof e&&(t=t||n.defaultEncoding,t!==n.encoding&&(e=a.from(e,t),t=""),r=!0),R(this,e,t,!1,r)},j.prototype.unshift=function(e){return R(this,e,null,!0,!1)},j.prototype.isPaused=function(){return!1===this._readableState.flowing},j.prototype.setEncoding=function(e){f||(f=r("qiJe").StringDecoder);var t=new f(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;var n=this._readableState.buffer.head,i="";while(null!==n)i+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var T=1073741824;function I(e){return e>=T?e=T:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function L(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=I(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function D(e,t){if(h("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?N(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,U(e)))}}function N(e){var t=e._readableState;h("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(h("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(U,e))}function U(e){var t=e._readableState;h("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,z(e)}function B(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(q,e,t))}function q(e,t){while(!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length)){var r=t.length;if(h("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function F(e){return function(){var t=e._readableState;h("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,z(e))}}function W(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function H(e){h("readable nexttick read 0"),e.read(0)}function V(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(K,e,t))}function K(e,t){h("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),z(e),t.flowing&&!t.reading&&e.read(0)}function z(e){var t=e._readableState;h("flow",t.flowing);while(t.flowing&&null!==e.read());}function J(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function G(e){var t=e._readableState;h("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(X,t,e))}function X(e,t){if(h("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function Y(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}j.prototype.read=function(e){h("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return h("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?G(this):N(this),null;if(e=L(e,t),0===e&&t.ended)return 0===t.length&&G(this),null;var n,i=t.needReadable;return h("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&(i=!0,h("length less than watermark",i)),t.ended||t.reading?(i=!1,h("reading or ended",i)):i&&(h("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=L(r,t))),n=e>0?J(e,t):null,null===n?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&G(this)),null!==n&&this.emit("data",n),n},j.prototype._read=function(e){k(this,new S("_read()"))},j.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e);break}i.pipesCount+=1,h("pipe count=%d opts=%j",i.pipesCount,t);var s=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr,a=s?c:v;function u(e,t){h("onunpipe"),e===r&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,f())}function c(){h("onend"),e.end()}i.endEmitted?n.nextTick(a):r.once("end",a),e.on("unpipe",u);var l=F(r);e.on("drain",l);var d=!1;function f(){h("cleanup"),e.removeListener("close",g),e.removeListener("finish",y),e.removeListener("drain",l),e.removeListener("error",m),e.removeListener("unpipe",u),r.removeListener("end",c),r.removeListener("end",v),r.removeListener("data",p),d=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||l()}function p(t){h("ondata");var n=e.write(t);h("dest.write",n),!1===n&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==Y(i.pipes,e))&&!d&&(h("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function m(t){h("onerror",t),v(),e.removeListener("error",m),0===o(e,"error")&&k(e,t)}function g(){e.removeListener("finish",y),v()}function y(){h("onfinish"),e.removeListener("close",g),v()}function v(){h("unpipe"),r.unpipe(e)}return r.on("data",p),x(e,"error",m),e.once("close",g),e.once("finish",y),e.emit("pipe",r),i.flowing||(h("pipe resume"),r.resume()),e},j.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=Y(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},j.prototype.on=function(e,t){var r=s.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,h("on readable",i.length,i.reading),i.length?N(this):i.reading||n.nextTick(H,this))),r},j.prototype.addListener=j.prototype.on,j.prototype.removeListener=function(e,t){var r=s.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(W,this),r},j.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||n.nextTick(W,this),t},j.prototype.resume=function(){var e=this._readableState;return e.flowing||(h("resume"),e.flowing=!e.readableListening,V(this,e)),e.paused=!1,this},j.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},j.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(h("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){if(h("wrapped data"),r.decoder&&(i=r.decoder.write(i)),(!r.objectMode||null!==i&&void 0!==i)&&(r.objectMode||i&&i.length)){var o=t.push(i);o||(n=!0,e.pause())}})),e)void 0===this[i]&&"function"===typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<E.length;o++)e.on(E[o],this.emit.bind(this,E[o]));return this._read=function(t){h("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"===typeof Symbol&&(j.prototype[Symbol.asyncIterator]=function(){return void 0===p&&(p=r("H1X/")),p(this)}),Object.defineProperty(j.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(j.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(j.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),j._fromList=J,Object.defineProperty(j.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"===typeof Symbol&&(j.from=function(e,t){return void 0===m&&(m=r("rPsM")),m(j,e,t)})}).call(this,r("IyRk"),r("Q2Ig"))}}]);